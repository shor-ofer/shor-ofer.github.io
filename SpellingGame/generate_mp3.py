import asyncio
import edge_tts
import os
import json

words = [
"כמו","אני","שלו","הוא","היה","עבור",
"להיות","אחד","יש לי",
"על ידי","מילה","אבל","כמה","הוא",
"אתה","היה לי","עבור",
"זמן","אנחנו","יכול","אחר","היו",
"לעשות","שלהם","זמן","יהיה","איך","אמר","בית",
"לספר","עושה","שלוש","רוצה","אוויר",
"לשחק","קטן","סוף","לשים","בית","לקרוא",
"נמל","גדול","לאיית","להוסיף","אפילו","ארץ","כאן","חייב",
"גדול","גבוה","כזה","מעקב","מעשה","מדוע","שואל","אנשים",
"לשנות","הלכתי","אור","סוג","צריך","בית","תמונה",
"לנסות","שלנו","שוב","חיה","נקודה","אמא","עולם","ליד",
"לבנות","עצמי","כדור הארץ","חדש","עבודה","חלק",
"לקחת","לקבל","מקום","עשיתי","לחיות","איפה","לאחר","בחזרה",
"קטן","עגול","גבר","שנה","הגיע","מופע",
"טוב","לתת","שלנו","תחת","מאוד","דרך",
"טופס","משפט","גדול","חושב","אומר","לעזור","נמוך",
"שורה","שונה","תור","סיבה","הרבה","אומר","לפני","מהלך",
"נכון","ילד","ישן","אותו","היא",
"כאשר","למעלה","שימוש","שלך","דרך","רבים",
"שלהם","לכתוב","היית","כמו","אלה","שלה","ארוך",
"לעשות","דבר","לראות","שלו","שנים","להסתכל","יותר",
"יום","יכול","ללכת","תבואו","עשיתי","מספר","נשמע",
"ביותר","אנשים","שלי","יודע","מים","מאשר","שיחה",
"ראשון","רשאי","למטה","היה","עכשיו","למצוא",
"ראש","לעמוד","צריך","מדינה","מצאתי","תשובה",
"בית ספר","לגדול","מחקר","עוד","ללמוד","צמח","כיסוי","מזון",
"שמש","ארבעה","בין","מדינה","לשמור","עין","אף פעם לא","אחרון",
"בואו","חשבתי","עיר","לחצות","החווה","קשה","התחלה",
"אולי","סיפור","מסור","רחוק","לצייר","עזב","מאוחר",
"לרוץ","תוך","עיתונות","קרוב","לילה","אמיתי","חיים",
"כמה","צפון","ספר","לשאת","לקחתי","מדע","לסעוד","חדר",
"חבר","החל","רעיון","דגים","להפסיק","פעם אחת","בסיס",
"לשמוע","סוס","לחתוך","בטוח","לצפות","צבע","פנים",
"עיקרי","פתוח","נראה","יחד","הבא","לבן","ילדים","להתחיל",
"ללכת","דוגמא","להקל","נייר","קבוצה","תמיד","מוסיקה",
"אלה","שני","סימן","לעתים קרובות","מכתב","מייל","נהר",
"מכונית","רגליים","טיפול","שני","מספיק","מישור","ילדה","כרגיל",
"צעיר","מוכן","מעל","אי פעם","אדום","רשימה","למרות ש","להרגיש",
"דיבורים","ציפור","בקרוב","גוף","כלב","משפחה","ישיר","פוזה",
"לעזוב","שיר","למדוד","דלת","מוצר","שחור","קצר","ספרה",
"כיתה","רוח","שאלה","לקרות","מלא","ספינה","אזור","מחצית",
"רוק","כדי","דרום","בעיה","חתיכה","אמר לי","ידעתי",
"עובר","מאז","עליון","מלך","רחוב","אינץ","להכפיל",
"שום דבר","כמובן","להישאר","גלגל","מלא","כוח","כחול","אובייקט",
"להחליט","פני השטח","עמוק","ירח","רגל","מערכת","עסוק",
"מבחן","שיא","סירה","משותף","זהב","אפשרי","מטוס","במקום",
"יבש","פלא","צחוק","אלף","לפני","רצתי","לבדוק","משחק",
"צורה","להשוות","מתגעגע","הביא","חום","שלג","צמיג",
"להביא","רחוק","למלא","מזרח","לצייר","שפה","בין",
"יחידה","כוח","העיר","קנס","מסוים","לעוף","ליפול","להוביל",
"זעקה","אפל","מכונה","הערה","לחכות","תכנית","דמות","כוכב",
"תיבה","שם עצם","שדה","שאר","נכון","תוכל","קילו","עשיתי",
"יופי","כונן","עמד","להכיל","מול","ללמד","שבוע","סופי",
"נתתי","ירוק","מהיר","לפתח","אוקיינוס","חופשי",
"דקות","חזק","מיוחד","דעה","מאחור","ברור","זנב","לייצר",
"עובדה","חלל","שמע","הטוב ביותר","שעה","טוב יותר","נכון","במהלך",
"מאה","חמש","לזכור","צעד","מוקדם","להחזיק","מערב","קרקע",
"עניין","להגיע","מהר","פועל","לשיר","להקשיב","שולחן",
"נסיעה","פחות","בוקר","עשר","פשוט","כמה","תנועה","לקראת",
"מלחמה","שכבתי","נגד","דפוס","איטי","מרכז","אהבה","אדם",
"כסף","לשרת","להופיע","כביש","המפה","גשם","שלטון","למשול",
"למשוך","הודעה","קול","אנרגיה","ציד","סביר","מיטה",
"ביצה","נסיעה","מאמין","אולי","לבחור","פתאומי",
"לספור","רבוע","סיבה","משך","מייצג","אמנות","נושא","אזור",
"גודל","להשתנות","להתיישב","לדבר","משקל","כללי","קרח","עניין",
"המעגל","זוג","כולל","פער","הברה","הרגיש","גדול","כדור",
"בכל זאת","טיפה","בבוקר","נוכחי","כבד","ריקוד",
"מנוע","עמדה","זרוע","רחב","מפרש","חומר","חלק","יער",
"לשבת","מירוץ","חלון","חנות","הקיץ","רכבת","לישון","להוכיח",
"בודד","רגל","תרגיל","קיר","מלכוד","מאחל לי","שמים",
"לוח","שמחה","חורף","ישבתי","נכתב","פראי","מכשיר","שמר",
"זכוכית","דשא","פרה","עבודה","קצה","סימן","ביקור","האחרון",
"כיף","בהיר","מזג אוויר","חודש","מיליון","לשאת",
"גימור","שמח","מקווה","פרח","להלביש","מוזר","נעלם","מסחר",
"מנגינה","טיול","משרד","לקבל","שורה","מדויק","סמל",
"למות","לפחות","צרות","צעקה","אלא","כתבתי","זרע","טון",
"להצטרף","מציע","נקי","הפסקה","גברת","חצר","לעלות",
"מכה","שמן","לגעת","גדלתי","סנט","לערבב","צוות",
"חוט","עלות","איבדתי","חום","ללבוש","שווה","שלחתי",
"לבחור","נפלתי","להתאים","לזרום","הוגן","בנק","לאסוף","להציל",
"שליטה","עשרוני","אוזן","אחר","פרץ","מקרה","אמצע",
"להרוג","אגם","רגע","בקנה מידה","האביב","להתבונן",
"ילד","ישר","עיצור","אומה","מילון","חלב","מהירות","שיטה",
"איבר","לשלם","גיל","סעיף","שמלה","ענן","הפתעה","שקט",
"אבן","זעיר","טיפוס","מגניב","לעצב","עני","מגרש","ניסיון",
"תחתון","מפתח","ברזל","אחת","מקל","דירה","עשרים","עור",
"חיוך","קמט","חור","לקפוץ","תינוק","שמונה","כפר","נפגש",
"שורש","לקנות","להעלות","לפתור","מתכת","דחיפה","שבע",
"סעיף","שלישי","תהא","מוחזק","שיער","לתאר","טבח","רצפה",
"תוצאה","לשרוף","גבעה","בטוח","חתול","המאה","לשקול",
"סוג","החוק","קצת","החוף","עותק","ביטוי","שקט","גבוה",
"חול","אדמה","גליל","טמפרטורה","אצבע","תעשייה","ערך","מאבק",
"שקר","הכה","לרגש","טבעי","תצוגה","תחושה","הון","לא יהיה",
"כיסא","סכנה","פירות","עשיר","עבה","חיל","תהליך","פועל",
"בפועל","נפרד","קשה","רופא","בבקשה","להגן על","הצהריים","יבול",
"מודרני","אלמנט","פגע","סטודנט","פינה","מפלגה","אספקה","של מי",
"אתר","טבעת","אופי","חרקים","נתפס","התקופה","מצביע על","רדיו",
"דיברתי","אטום","אדם","היסטוריה","השפעה","חשמלי","מצפה","עצם",
"רכבת","להניח","לספק","מסכים","עדין","אישה","קפטן",
"מניח","הכרחי","כנף","ליצור","השכן","לשטוף","עטלף",
"ולא","קהל","תירס","להשוות","שיר","מחרוזת","פעמון","תלויים",
"בשר","לשפשף","צינור","מפורסם","דולר","זרם","פחד","מראה",
"משולש","כדור הארץ","למהר","ראשי","מושבה","שעון","שלי",
"עניבה","להיכנס","גדול","טרי","חיפוש","לשלוח","צהוב","אקדח",
"לאפשר","הדפסה","מקום","מדבר","חליפה","נוכחי","מעלית",
"עלה","להגיע","אדון","מסלול","הורה","החוף","החלוקה","גיליון",
"חומר","להעדיף","להתחבר","שלאחר","לבלות","אקורד","שומן","שמח",
"מקורי","מניה","תחנה","אבא","לחם","לחייב את","ראוי",
"הצעה","קטע","עבדים","ברווז","מיידי","שוק","תואר","לאכלס",
"חומוס","יקר","אויב","להגיב","משקה","להתרחש","תמיכה","נאום",
"טבע","טווח","קיטור","תנועה","נתיב","נוזל","להיכנס","התכוון",
"מנה","שיניים","פגז","צוואר","חמצן","סוכר","מוות",
"מיומנות","נשים","עונה","פתרון","מגנט","כסף","תודה","סניף",
"משחק","סיומת","במיוחד","תאנה","חושש","ענק","אחות","פלדה",
"לדון","קדימה","דומה","להנחות את","ניסיון","ציון","תפוח","קניתי",
"הוביל","המגרש","מעיל","מסה","כרטיס","להקה","חבל","תלוש",
"לנצח","לחלום","ערב","מצב","הזנה","כלי","סך הכל","בסיסי",
"ריח","עמק","ולא","כפול","מושב","להמשיך","בלוק","תרשים",
"כובע","למכור","הצלחה","חברה","להחסיר","אירוע","בפרט","עסקה",
"לשחות","טווח","ההפך","אישה","נעל","כתף","התפשטות","לסדר",
"מחנה","להמציא","כותנה","נולד","לקבוע","ליטר","תשע","משאית",
"רעש","רמה","סיכוי","לאסוף","חנות","מתיחה","לזרוק","ברק",
"רכוש","טור","מולקולה","בחר","לא נכון","אפור","חוזר","דורש",
"רחב","להכין","מלח","האף","לשון רבים","כעס","טענה","יבשת"
] 

mp3_dir = "mp3s"
os.makedirs(mp3_dir, exist_ok=True)

async def save_word(word, output_path):
    communicate = edge_tts.Communicate(text=word, voice="he-IL-HilaNeural")
    await communicate.save(output_path)

async def main():
    mapping = []
    index = 0
    for word in words:
        mp3_path = os.path.join(mp3_dir, f"{word}.mp3")
        print(f"Generating: {word}/{index}")
        index += 1
        await save_word(word, mp3_path)

    # Concatenate into one binary file
    with open("words.bundle", "wb") as bundle:
        offset = 0
        for word in words:
            mp3_path = os.path.join(mp3_dir, f"{word}.mp3")
            with open(mp3_path, "rb") as f:
                data = f.read()
                size = len(data)
                bundle.write(data)
                mapping.append({
                    "word": word,
                    "offset": offset,
                    "size": size
                })
                offset += size

    # Write mapping
    with open("map.json", "w", encoding="utf-8") as f:
        json.dump(mapping, f, ensure_ascii=False, indent=2)

asyncio.run(main())
