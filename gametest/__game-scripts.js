var spine,__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s])};return function(a,s){function n(){this.constructor=a}i(a,s),a.prototype=null===s?Object.create(s):(n.prototype=s.prototype,new n)}}();!function(i){var a,s,h,u,p,m,v=function(){function t(i,a,s){if(null==i)throw new Error("name cannot be null.");if(null==a)throw new Error("timelines cannot be null.");this.name=i,this.timelines=a,this.duration=s}return t.prototype.apply=function(i,a,s,h,u,p,m,v){if(null==i)throw new Error("skeleton cannot be null.");h&&0!=this.duration&&(s%=this.duration,0<a&&(a%=this.duration));for(var E=this.timelines,M=0,b=E.length;M<b;M++)E[M].apply(i,a,s,u,p,m,v)},t.binarySearch=function(i,a,s){void 0===s&&(s=1);var h=0,u=i.length/s-2;if(0==u)return s;for(var p=u>>>1;;){if(i[(p+1)*s]<=a?h=p+1:u=p,h==u)return(h+1)*s;p=h+u>>>1}},t.linearSearch=function(i,a,s){for(var h=0,u=i.length-s;h<=u;h+=s)if(i[h]>a)return h;return-1},t}();i.Animation=v,(s=a=i.MixPose||(i.MixPose={}))[s.setup=0]="setup",s[s.current=1]="current",s[s.currentLayered=2]="currentLayered",(u=h=i.MixDirection||(i.MixDirection={}))[u.in=0]="in",u[u.out=1]="out",(m=p=i.TimelineType||(i.TimelineType={}))[m.rotate=0]="rotate",m[m.translate=1]="translate",m[m.scale=2]="scale",m[m.shear=3]="shear",m[m.attachment=4]="attachment",m[m.color=5]="color",m[m.deform=6]="deform",m[m.event=7]="event",m[m.drawOrder=8]="drawOrder",m[m.ikConstraint=9]="ikConstraint",m[m.transformConstraint=10]="transformConstraint",m[m.pathConstraintPosition=11]="pathConstraintPosition",m[m.pathConstraintSpacing=12]="pathConstraintSpacing",m[m.pathConstraintMix=13]="pathConstraintMix",m[m.twoColor=14]="twoColor";var E=function(){function y(a){if(a<=0)throw new Error("frameCount must be > 0: "+a);this.curves=i.Utils.newFloatArray((a-1)*y.BEZIER_SIZE)}return y.prototype.getFrameCount=function(){return this.curves.length/y.BEZIER_SIZE+1},y.prototype.setLinear=function(i){this.curves[i*y.BEZIER_SIZE]=y.LINEAR},y.prototype.setStepped=function(i){this.curves[i*y.BEZIER_SIZE]=y.STEPPED},y.prototype.getCurveType=function(i){var a=i*y.BEZIER_SIZE;if(a==this.curves.length)return y.LINEAR;var s=this.curves[a];return s==y.LINEAR?y.LINEAR:s==y.STEPPED?y.STEPPED:y.BEZIER},y.prototype.setCurve=function(i,a,s,h,u){var p=.03*(2*-a+h),m=.03*(2*-s+u),v=.006*(3*(a-h)+1),E=.006*(3*(s-u)+1),M=2*p+v,b=2*m+E,R=.3*a+p+.16666667*v,I=.3*s+m+.16666667*E,S=i*y.BEZIER_SIZE,P=this.curves;P[S++]=y.BEZIER;for(var C=R,_=I,V=S+y.BEZIER_SIZE-1;S<V;S+=2)P[S]=C,P[S+1]=_,R+=M,I+=b,M+=v,b+=E,C+=R,_+=I},y.prototype.getCurvePercent=function(a,s){s=i.MathUtils.clamp(s,0,1);var h=this.curves,u=a*y.BEZIER_SIZE,p=h[u];if(p==y.LINEAR)return s;if(p==y.STEPPED)return 0;for(var m=0,v=++u,E=u+y.BEZIER_SIZE-1;u<E;u+=2)if(s<=(m=h[u])){var M,b=void 0;return(M=u==v?b=0:(b=h[u-2],h[u-1]))+(h[u+1]-M)*(s-b)/(m-b)}var R=h[u-1];return R+(1-R)*(s-m)/(1-m)},y.LINEAR=0,y.STEPPED=1,y.BEZIER=2,y.BEZIER_SIZE=19,y}(),M=function(s){function g(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a<<1),h}return __extends(g,s),g.prototype.getPropertyId=function(){return(p.rotate<<24)+this.boneIndex},g.prototype.setFrame=function(i,a,s){i<<=1,this.frames[i]=a,this.frames[i+g.ROTATION]=s},g.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.bones[this.boneIndex];if(h<M[0])switch(m){case a.setup:return void(b.rotation=b.data.rotation);case a.current:var R=b.data.rotation-b.rotation;R-=360*(16384-(16384.499999999996-R/360|0)),b.rotation+=R*p}else if(h>=M[M.length-g.ENTRIES])if(m==a.setup)b.rotation=b.data.rotation+M[M.length+g.PREV_ROTATION]*p;else{var I=b.data.rotation+M[M.length+g.PREV_ROTATION]-b.rotation;I-=360*(16384-(16384.499999999996-I/360|0)),b.rotation+=I*p}else{var S=v.binarySearch(M,h,g.ENTRIES),P=M[S+g.PREV_ROTATION],C=M[S],_=this.getCurvePercent((S>>1)-1,1-(h-C)/(M[S+g.PREV_TIME]-C)),V=M[S+g.ROTATION]-P;V=P+(V-=360*(16384-(16384.499999999996-V/360|0)))*_,m==a.setup?(V-=360*(16384-(16384.499999999996-V/360|0)),b.rotation=b.data.rotation+V*p):(V=b.data.rotation+V-b.rotation,V-=360*(16384-(16384.499999999996-V/360|0)),b.rotation+=V*p)}},g.ENTRIES=2,g.PREV_TIME=-2,g.PREV_ROTATION=-1,g.ROTATION=1,g}(i.CurveTimeline=E);i.RotateTimeline=M;var b=function(s){function d(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*d.ENTRIES),h}return __extends(d,s),d.prototype.getPropertyId=function(){return(p.translate<<24)+this.boneIndex},d.prototype.setFrame=function(i,a,s,h){i*=d.ENTRIES,this.frames[i]=a,this.frames[i+d.X]=s,this.frames[i+d.Y]=h},d.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.bones[this.boneIndex];if(h<M[0])switch(m){case a.setup:return b.x=b.data.x,void(b.y=b.data.y);case a.current:b.x+=(b.data.x-b.x)*p,b.y+=(b.data.y-b.y)*p}else{var R=0,I=0;if(h>=M[M.length-d.ENTRIES])R=M[M.length+d.PREV_X],I=M[M.length+d.PREV_Y];else{var S=v.binarySearch(M,h,d.ENTRIES);R=M[S+d.PREV_X],I=M[S+d.PREV_Y];var P=M[S],C=this.getCurvePercent(S/d.ENTRIES-1,1-(h-P)/(M[S+d.PREV_TIME]-P));R+=(M[S+d.X]-R)*C,I+=(M[S+d.Y]-I)*C}m==a.setup?(b.x=b.data.x+R*p,b.y=b.data.y+I*p):(b.x+=(b.data.x+R-b.x)*p,b.y+=(b.data.y+I-b.y)*p)}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_X=-2,d.PREV_Y=-1,d.X=1,d.Y=2,d}(E),R=function(s){function g(i){return s.call(this,i)||this}return __extends(g,s),g.prototype.getPropertyId=function(){return(p.scale<<24)+this.boneIndex},g.prototype.apply=function(s,u,p,m,E,M,b){var R=this.frames,I=s.bones[this.boneIndex];if(p<R[0])switch(M){case a.setup:return I.scaleX=I.data.scaleX,void(I.scaleY=I.data.scaleY);case a.current:I.scaleX+=(I.data.scaleX-I.scaleX)*E,I.scaleY+=(I.data.scaleY-I.scaleY)*E}else{var S=0,P=0;if(p>=R[R.length-g.ENTRIES])S=R[R.length+g.PREV_X]*I.data.scaleX,P=R[R.length+g.PREV_Y]*I.data.scaleY;else{var C=v.binarySearch(R,p,g.ENTRIES);S=R[C+g.PREV_X],P=R[C+g.PREV_Y];var _=R[C],V=this.getCurvePercent(C/g.ENTRIES-1,1-(p-_)/(R[C+g.PREV_TIME]-_));S=(S+(R[C+g.X]-S)*V)*I.data.scaleX,P=(P+(R[C+g.Y]-P)*V)*I.data.scaleY}if(1==E)I.scaleX=S,I.scaleY=P;else{var N=0,D=0;D=M==a.setup?(N=I.data.scaleX,I.data.scaleY):(N=I.scaleX,I.scaleY),b==h.out?(S=Math.abs(S)*i.MathUtils.signum(N),P=Math.abs(P)*i.MathUtils.signum(D)):(N=Math.abs(N)*i.MathUtils.signum(S),D=Math.abs(D)*i.MathUtils.signum(P)),I.scaleX=N+(S-N)*E,I.scaleY=D+(P-D)*E}}},g}(i.TranslateTimeline=b);i.ScaleTimeline=R;var I=function(i){function d(a){return i.call(this,a)||this}return __extends(d,i),d.prototype.getPropertyId=function(){return(p.shear<<24)+this.boneIndex},d.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.bones[this.boneIndex];if(h<M[0])switch(m){case a.setup:return b.shearX=b.data.shearX,void(b.shearY=b.data.shearY);case a.current:b.shearX+=(b.data.shearX-b.shearX)*p,b.shearY+=(b.data.shearY-b.shearY)*p}else{var R=0,I=0;if(h>=M[M.length-d.ENTRIES])R=M[M.length+d.PREV_X],I=M[M.length+d.PREV_Y];else{var S=v.binarySearch(M,h,d.ENTRIES);R=M[S+d.PREV_X],I=M[S+d.PREV_Y];var P=M[S],C=this.getCurvePercent(S/d.ENTRIES-1,1-(h-P)/(M[S+d.PREV_TIME]-P));R+=(M[S+d.X]-R)*C,I+=(M[S+d.Y]-I)*C}m==a.setup?(b.shearX=b.data.shearX+R*p,b.shearY=b.data.shearY+I*p):(b.shearX+=(b.data.shearX+R-b.shearX)*p,b.shearY+=(b.data.shearY+I-b.shearY)*p)}},d}(b);i.ShearTimeline=I;var S=function(s){function x(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*x.ENTRIES),h}return __extends(x,s),x.prototype.getPropertyId=function(){return(p.color<<24)+this.slotIndex},x.prototype.setFrame=function(i,a,s,h,u,p){i*=x.ENTRIES,this.frames[i]=a,this.frames[i+x.R]=s,this.frames[i+x.G]=h,this.frames[i+x.B]=u,this.frames[i+x.A]=p},x.prototype.apply=function(i,s,h,u,p,m,E){var M=i.slots[this.slotIndex],b=this.frames;if(h<b[0])switch(m){case a.setup:return void M.color.setFromColor(M.data.color);case a.current:var R=M.color,I=M.data.color;R.add((I.r-R.r)*p,(I.g-R.g)*p,(I.b-R.b)*p,(I.a-R.a)*p)}else{var S=0,P=0,C=0,_=0;if(h>=b[b.length-x.ENTRIES]){var V=b.length;S=b[V+x.PREV_R],P=b[V+x.PREV_G],C=b[V+x.PREV_B],_=b[V+x.PREV_A]}else{var N=v.binarySearch(b,h,x.ENTRIES);S=b[N+x.PREV_R],P=b[N+x.PREV_G],C=b[N+x.PREV_B],_=b[N+x.PREV_A];var D=b[N],L=this.getCurvePercent(N/x.ENTRIES-1,1-(h-D)/(b[N+x.PREV_TIME]-D));S+=(b[N+x.R]-S)*L,P+=(b[N+x.G]-P)*L,C+=(b[N+x.B]-C)*L,_+=(b[N+x.A]-_)*L}1==p?M.color.set(S,P,C,_):(R=M.color,m==a.setup&&R.setFromColor(M.data.color),R.add((S-R.r)*p,(P-R.g)*p,(C-R.b)*p,(_-R.a)*p))}},x.ENTRIES=5,x.PREV_TIME=-5,x.PREV_R=-4,x.PREV_G=-3,x.PREV_B=-2,x.PREV_A=-1,x.R=1,x.G=2,x.B=3,x.A=4,x}(E);i.ColorTimeline=S;var P=function(s){function T(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*T.ENTRIES),h}return __extends(T,s),T.prototype.getPropertyId=function(){return(p.twoColor<<24)+this.slotIndex},T.prototype.setFrame=function(i,a,s,h,u,p,m,v,E){i*=T.ENTRIES,this.frames[i]=a,this.frames[i+T.R]=s,this.frames[i+T.G]=h,this.frames[i+T.B]=u,this.frames[i+T.A]=p,this.frames[i+T.R2]=m,this.frames[i+T.G2]=v,this.frames[i+T.B2]=E},T.prototype.apply=function(i,s,h,u,p,m,E){var M=i.slots[this.slotIndex],b=this.frames;if(h<b[0])switch(m){case a.setup:return M.color.setFromColor(M.data.color),void M.darkColor.setFromColor(M.data.darkColor);case a.current:var R=M.color,I=M.darkColor,S=M.data.color,P=M.data.darkColor;R.add((S.r-R.r)*p,(S.g-R.g)*p,(S.b-R.b)*p,(S.a-R.a)*p),I.add((P.r-I.r)*p,(P.g-I.g)*p,(P.b-I.b)*p,0)}else{var C=0,_=0,V=0,N=0,D=0,L=0,Y=0;if(h>=b[b.length-T.ENTRIES]){var U=b.length;C=b[U+T.PREV_R],_=b[U+T.PREV_G],V=b[U+T.PREV_B],N=b[U+T.PREV_A],D=b[U+T.PREV_R2],L=b[U+T.PREV_G2],Y=b[U+T.PREV_B2]}else{var X=v.binarySearch(b,h,T.ENTRIES);C=b[X+T.PREV_R],_=b[X+T.PREV_G],V=b[X+T.PREV_B],N=b[X+T.PREV_A],D=b[X+T.PREV_R2],L=b[X+T.PREV_G2],Y=b[X+T.PREV_B2];var F=b[X],B=this.getCurvePercent(X/T.ENTRIES-1,1-(h-F)/(b[X+T.PREV_TIME]-F));C+=(b[X+T.R]-C)*B,_+=(b[X+T.G]-_)*B,V+=(b[X+T.B]-V)*B,N+=(b[X+T.A]-N)*B,D+=(b[X+T.R2]-D)*B,L+=(b[X+T.G2]-L)*B,Y+=(b[X+T.B2]-Y)*B}1==p?(M.color.set(C,_,V,N),M.darkColor.set(D,L,Y,1)):(R=M.color,I=M.darkColor,m==a.setup&&(R.setFromColor(M.data.color),I.setFromColor(M.data.darkColor)),R.add((C-R.r)*p,(_-R.g)*p,(V-R.b)*p,(N-R.a)*p),I.add((D-I.r)*p,(L-I.g)*p,(Y-I.b)*p,0))}},T.ENTRIES=8,T.PREV_TIME=-8,T.PREV_R=-7,T.PREV_G=-6,T.PREV_B=-5,T.PREV_A=-4,T.PREV_R2=-3,T.PREV_G2=-2,T.PREV_B2=-1,T.R=1,T.G=2,T.B=3,T.A=4,T.R2=5,T.G2=6,T.B2=7,T}(E);i.TwoColorTimeline=P;var C=function(){function t(a){this.frames=i.Utils.newFloatArray(a),this.attachmentNames=new Array(a)}return t.prototype.getPropertyId=function(){return(p.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(i,a,s){this.frames[i]=a,this.attachmentNames[i]=s},t.prototype.apply=function(i,s,u,p,m,E,M){var b=i.slots[this.slotIndex];if(M!=h.out||E!=a.setup){var R=this.frames;if(u<R[0]){if(E==a.setup){var I=b.data.attachmentName;b.setAttachment(null==I?null:i.getAttachment(this.slotIndex,I))}}else{var S;S=u>=R[R.length-1]?R.length-1:v.binarySearch(R,u,1)-1;var P=this.attachmentNames[S];i.slots[this.slotIndex].setAttachment(null==P?null:i.getAttachment(this.slotIndex,P))}}else{var C=b.data.attachmentName;b.setAttachment(null==C?null:i.getAttachment(this.slotIndex,C))}},t}();i.AttachmentTimeline=C;var _=null,V=function(s){function t(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a),h.frameVertices=new Array(a),null==_&&(_=i.Utils.newFloatArray(64)),h}return __extends(t,s),t.prototype.getPropertyId=function(){return(p.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(i,a,s){this.frames[i]=a,this.frameVertices[i]=s},t.prototype.apply=function(s,h,u,p,m,E,M){var b=s.slots[this.slotIndex],R=b.getAttachment();if(R instanceof i.VertexAttachment&&R.applyDeform(this.attachment)){var I=b.attachmentVertices;0==I.length&&(m=1);var S=this.frameVertices,P=S[0].length,C=this.frames;if(u<C[0]){var _=R;switch(E){case a.setup:return void(I.length=0);case a.current:if(1==m){I.length=0;break}var V=i.Utils.setArraySize(I,P);if(null==_.bones)for(var N=_.vertices,D=0;D<P;D++)V[D]+=(N[D]-V[D])*m;else for(m=1-m,D=0;D<P;D++)V[D]*=m}}else{var L=i.Utils.setArraySize(I,P);if(u>=C[C.length-1]){var Y=S[C.length-1];if(1==m)i.Utils.arrayCopy(Y,0,L,0,P);else if(E==a.setup)if(null==(_=R).bones)for(var U=_.vertices,X=0;X<P;X++){var F=U[X];L[X]=F+(Y[X]-F)*m}else for(var B=0;B<P;B++)L[B]=Y[B]*m;else for(var W=0;W<P;W++)L[W]+=(Y[W]-L[W])*m}else{var q=v.binarySearch(C,u),j=S[q-1],G=S[q],z=C[q],H=this.getCurvePercent(q-1,1-(u-z)/(C[q-1]-z));if(1==m)for(var J=0;J<P;J++){var Q=j[J];L[J]=Q+(G[J]-Q)*H}else if(E==a.setup)if(null==(_=R).bones)for(var K=_.vertices,$=0;$<P;$++)Q=j[$],F=K[$],L[$]=F+(Q+(G[$]-Q)*H-F)*m;else for(var tt=0;tt<P;tt++)Q=j[tt],L[tt]=(Q+(G[tt]-Q)*H)*m;else for(var et=0;et<P;et++)Q=j[et],L[et]+=(Q+(G[et]-Q)*H-L[et])*m}}}},t}(E);i.DeformTimeline=V;var N=function(){function t(a){this.frames=i.Utils.newFloatArray(a),this.events=new Array(a)}return t.prototype.getPropertyId=function(){return p.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(i,a){this.frames[i]=a.time,this.events[i]=a},t.prototype.apply=function(i,a,s,h,u,p,m){if(null!=h){var E=this.frames,M=this.frames.length;if(s<a)this.apply(i,a,Number.MAX_VALUE,h,u,p,m),a=-1;else if(a>=E[M-1])return;if(!(s<E[0])){var b=0;if(a<E[0])b=0;else for(var R=E[b=v.binarySearch(E,a)];0<b&&E[b-1]==R;)b--;for(;b<M&&s>=E[b];b++)h.push(this.events[b])}}},t}();i.EventTimeline=N;var D=function(){function t(a){this.frames=i.Utils.newFloatArray(a),this.drawOrders=new Array(a)}return t.prototype.getPropertyId=function(){return p.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(i,a,s){this.frames[i]=a,this.drawOrders[i]=s},t.prototype.apply=function(s,u,p,m,E,M,b){var R=s.drawOrder,I=s.slots;if(b!=h.out||M!=a.setup){var S=this.frames;if(p<S[0])M==a.setup&&i.Utils.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length);else{var P;P=p>=S[S.length-1]?S.length-1:v.binarySearch(S,p)-1;var C=this.drawOrders[P];if(null==C)i.Utils.arrayCopy(I,0,R,0,I.length);else for(var _=0,V=C.length;_<V;_++)R[_]=I[C[_]]}}else i.Utils.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length)},t}();i.DrawOrderTimeline=D;var L=function(s){function f(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*f.ENTRIES),h}return __extends(f,s),f.prototype.getPropertyId=function(){return(p.ikConstraint<<24)+this.ikConstraintIndex},f.prototype.setFrame=function(i,a,s,h){i*=f.ENTRIES,this.frames[i]=a,this.frames[i+f.MIX]=s,this.frames[i+f.BEND_DIRECTION]=h},f.prototype.apply=function(i,s,u,p,m,E,M){var b=this.frames,R=i.ikConstraints[this.ikConstraintIndex];if(u<b[0])switch(E){case a.setup:return R.mix=R.data.mix,void(R.bendDirection=R.data.bendDirection);case a.current:R.mix+=(R.data.mix-R.mix)*m,R.bendDirection=R.data.bendDirection}else if(u>=b[b.length-f.ENTRIES])E==a.setup?(R.mix=R.data.mix+(b[b.length+f.PREV_MIX]-R.data.mix)*m,R.bendDirection=M==h.out?R.data.bendDirection:b[b.length+f.PREV_BEND_DIRECTION]):(R.mix+=(b[b.length+f.PREV_MIX]-R.mix)*m,M==h.in&&(R.bendDirection=b[b.length+f.PREV_BEND_DIRECTION]));else{var I=v.binarySearch(b,u,f.ENTRIES),S=b[I+f.PREV_MIX],P=b[I],C=this.getCurvePercent(I/f.ENTRIES-1,1-(u-P)/(b[I+f.PREV_TIME]-P));E==a.setup?(R.mix=R.data.mix+(S+(b[I+f.MIX]-S)*C-R.data.mix)*m,R.bendDirection=M==h.out?R.data.bendDirection:b[I+f.PREV_BEND_DIRECTION]):(R.mix+=(S+(b[I+f.MIX]-S)*C-R.mix)*m,M==h.in&&(R.bendDirection=b[I+f.PREV_BEND_DIRECTION]))}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_MIX=-2,f.PREV_BEND_DIRECTION=-1,f.MIX=1,f.BEND_DIRECTION=2,f}(E);i.IkConstraintTimeline=L;var Y=function(s){function y(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*y.ENTRIES),h}return __extends(y,s),y.prototype.getPropertyId=function(){return(p.transformConstraint<<24)+this.transformConstraintIndex},y.prototype.setFrame=function(i,a,s,h,u,p){i*=y.ENTRIES,this.frames[i]=a,this.frames[i+y.ROTATE]=s,this.frames[i+y.TRANSLATE]=h,this.frames[i+y.SCALE]=u,this.frames[i+y.SHEAR]=p},y.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.transformConstraints[this.transformConstraintIndex];if(h<M[0]){var R=b.data;switch(m){case a.setup:return b.rotateMix=R.rotateMix,b.translateMix=R.translateMix,b.scaleMix=R.scaleMix,void(b.shearMix=R.shearMix);case a.current:b.rotateMix+=(R.rotateMix-b.rotateMix)*p,b.translateMix+=(R.translateMix-b.translateMix)*p,b.scaleMix+=(R.scaleMix-b.scaleMix)*p,b.shearMix+=(R.shearMix-b.shearMix)*p}}else{var I=0,S=0,P=0,C=0;if(h>=M[M.length-y.ENTRIES]){var _=M.length;I=M[_+y.PREV_ROTATE],S=M[_+y.PREV_TRANSLATE],P=M[_+y.PREV_SCALE],C=M[_+y.PREV_SHEAR]}else{var V=v.binarySearch(M,h,y.ENTRIES);I=M[V+y.PREV_ROTATE],S=M[V+y.PREV_TRANSLATE],P=M[V+y.PREV_SCALE],C=M[V+y.PREV_SHEAR];var N=M[V],D=this.getCurvePercent(V/y.ENTRIES-1,1-(h-N)/(M[V+y.PREV_TIME]-N));I+=(M[V+y.ROTATE]-I)*D,S+=(M[V+y.TRANSLATE]-S)*D,P+=(M[V+y.SCALE]-P)*D,C+=(M[V+y.SHEAR]-C)*D}m==a.setup?(R=b.data,b.rotateMix=R.rotateMix+(I-R.rotateMix)*p,b.translateMix=R.translateMix+(S-R.translateMix)*p,b.scaleMix=R.scaleMix+(P-R.scaleMix)*p,b.shearMix=R.shearMix+(C-R.shearMix)*p):(b.rotateMix+=(I-b.rotateMix)*p,b.translateMix+=(S-b.translateMix)*p,b.scaleMix+=(P-b.scaleMix)*p,b.shearMix+=(C-b.shearMix)*p)}},y.ENTRIES=5,y.PREV_TIME=-5,y.PREV_ROTATE=-4,y.PREV_TRANSLATE=-3,y.PREV_SCALE=-2,y.PREV_SHEAR=-1,y.ROTATE=1,y.TRANSLATE=2,y.SCALE=3,y.SHEAR=4,y}(E);i.TransformConstraintTimeline=Y;var U=function(s){function f(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*f.ENTRIES),h}return __extends(f,s),f.prototype.getPropertyId=function(){return(p.pathConstraintPosition<<24)+this.pathConstraintIndex},f.prototype.setFrame=function(i,a,s){i*=f.ENTRIES,this.frames[i]=a,this.frames[i+f.VALUE]=s},f.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.pathConstraints[this.pathConstraintIndex];if(h<M[0])switch(m){case a.setup:return void(b.position=b.data.position);case a.current:b.position+=(b.data.position-b.position)*p}else{var R=0;if(h>=M[M.length-f.ENTRIES])R=M[M.length+f.PREV_VALUE];else{var I=v.binarySearch(M,h,f.ENTRIES);R=M[I+f.PREV_VALUE];var S=M[I],P=this.getCurvePercent(I/f.ENTRIES-1,1-(h-S)/(M[I+f.PREV_TIME]-S));R+=(M[I+f.VALUE]-R)*P}m==a.setup?b.position=b.data.position+(R-b.data.position)*p:b.position+=(R-b.position)*p}},f.ENTRIES=2,f.PREV_TIME=-2,f.PREV_VALUE=-1,f.VALUE=1,f}(E),X=function(i){function f(a){return i.call(this,a)||this}return __extends(f,i),f.prototype.getPropertyId=function(){return(p.pathConstraintSpacing<<24)+this.pathConstraintIndex},f.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.pathConstraints[this.pathConstraintIndex];if(h<M[0])switch(m){case a.setup:return void(b.spacing=b.data.spacing);case a.current:b.spacing+=(b.data.spacing-b.spacing)*p}else{var R=0;if(h>=M[M.length-f.ENTRIES])R=M[M.length+f.PREV_VALUE];else{var I=v.binarySearch(M,h,f.ENTRIES);R=M[I+f.PREV_VALUE];var S=M[I],P=this.getCurvePercent(I/f.ENTRIES-1,1-(h-S)/(M[I+f.PREV_TIME]-S));R+=(M[I+f.VALUE]-R)*P}m==a.setup?b.spacing=b.data.spacing+(R-b.data.spacing)*p:b.spacing+=(R-b.spacing)*p}},f}(i.PathConstraintPositionTimeline=U);i.PathConstraintSpacingTimeline=X;var F=function(s){function d(a){var h=s.call(this,a)||this;return h.frames=i.Utils.newFloatArray(a*d.ENTRIES),h}return __extends(d,s),d.prototype.getPropertyId=function(){return(p.pathConstraintMix<<24)+this.pathConstraintIndex},d.prototype.setFrame=function(i,a,s,h){i*=d.ENTRIES,this.frames[i]=a,this.frames[i+d.ROTATE]=s,this.frames[i+d.TRANSLATE]=h},d.prototype.apply=function(i,s,h,u,p,m,E){var M=this.frames,b=i.pathConstraints[this.pathConstraintIndex];if(h<M[0])switch(m){case a.setup:return b.rotateMix=b.data.rotateMix,void(b.translateMix=b.data.translateMix);case a.current:b.rotateMix+=(b.data.rotateMix-b.rotateMix)*p,b.translateMix+=(b.data.translateMix-b.translateMix)*p}else{var R=0,I=0;if(h>=M[M.length-d.ENTRIES])R=M[M.length+d.PREV_ROTATE],I=M[M.length+d.PREV_TRANSLATE];else{var S=v.binarySearch(M,h,d.ENTRIES);R=M[S+d.PREV_ROTATE],I=M[S+d.PREV_TRANSLATE];var P=M[S],C=this.getCurvePercent(S/d.ENTRIES-1,1-(h-P)/(M[S+d.PREV_TIME]-P));R+=(M[S+d.ROTATE]-R)*C,I+=(M[S+d.TRANSLATE]-I)*C}m==a.setup?(b.rotateMix=b.data.rotateMix+(R-b.data.rotateMix)*p,b.translateMix=b.data.translateMix+(I-b.data.translateMix)*p):(b.rotateMix+=(R-b.rotateMix)*p,b.translateMix+=(I-b.translateMix)*p)}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_ROTATE=-2,d.PREV_TRANSLATE=-1,d.ROTATE=1,d.TRANSLATE=2,d}(E);i.PathConstraintMixTimeline=F}(spine||(spine={})),function(i){var a=function(){function A(a){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new p(this),this.propertyIDs=new i.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new i.Pool((function(){return new s})),this.data=a}return A.prototype.update=function(i){i*=this.timeScale;for(var a=this.tracks,s=0,h=a.length;s<h;s++){var u=a[s];if(null!=u){u.animationLast=u.nextAnimationLast,u.trackLast=u.nextTrackLast;var p=i*u.timeScale;if(0<u.delay){if(u.delay-=p,0<u.delay)continue;p=-u.delay,u.delay=0}var m=u.next;if(null!=m){var v=u.trackLast-m.delay;if(0<=v){for(m.delay=0,m.trackTime=v+i*m.timeScale,u.trackTime+=p,this.setCurrent(s,m,!0);null!=m.mixingFrom;)m.mixTime+=p,m=m.mixingFrom;continue}}else if(u.trackLast>=u.trackEnd&&null==u.mixingFrom){a[s]=null,this.queue.end(u),this.disposeNext(u);continue}if(null!=u.mixingFrom&&this.updateMixingFrom(u,i)){var E=u.mixingFrom;for(u.mixingFrom=null;null!=E;)this.queue.end(E),E=E.mixingFrom}u.trackTime+=p}}this.queue.drain()},A.prototype.updateMixingFrom=function(i,a){var s=i.mixingFrom;if(null==s)return!0;var h=this.updateMixingFrom(s,a);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,0<i.mixTime&&(i.mixTime>=i.mixDuration||0==i.timeScale)?(0!=s.totalAlpha&&0!=i.mixDuration||(i.mixingFrom=s.mixingFrom,i.interruptAlpha=s.interruptAlpha,this.queue.end(s)),h):(s.trackTime+=a*s.timeScale,i.mixTime+=a*i.timeScale,!1)},A.prototype.apply=function(a){if(null==a)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var s=this.events,h=this.tracks,u=!1,p=0,m=h.length;p<m;p++){var v=h[p];if(!(null==v||0<v.delay)){u=!0;var E=0==p?i.MixPose.current:i.MixPose.currentLayered,M=v.alpha;null!=v.mixingFrom?M*=this.applyMixingFrom(v,a,E):v.trackTime>=v.trackEnd&&null==v.next&&(M=0);var b=v.animationLast,R=v.getAnimationTime(),I=v.animation.timelines.length,S=v.animation.timelines;if(1==M)for(var P=0;P<I;P++)S[P].apply(a,b,R,s,1,i.MixPose.setup,i.MixDirection.in);else{var C=v.timelineData,_=0==v.timelinesRotation.length;_&&i.Utils.setArraySize(v.timelinesRotation,I<<1,null);var V=v.timelinesRotation;for(P=0;P<I;P++){var N=S[P],D=C[P]>=A.FIRST?i.MixPose.setup:E;N instanceof i.RotateTimeline?this.applyRotateTimeline(N,a,R,M,D,V,P<<1,_):(i.Utils.webkit602BugfixHelper(M,D),N.apply(a,b,R,s,M,D,i.MixDirection.in))}}this.queueEvents(v,R),s.length=0,v.nextAnimationLast=R,v.nextTrackLast=v.trackTime}}return this.queue.drain(),u},A.prototype.applyMixingFrom=function(a,s,h){var u=a.mixingFrom;null!=u.mixingFrom&&this.applyMixingFrom(u,s,h);var p=0;0==a.mixDuration?(p=1,h=i.MixPose.setup):1<(p=a.mixTime/a.mixDuration)&&(p=1);var m=p<u.eventThreshold?this.events:null,v=p<u.attachmentThreshold,E=p<u.drawOrderThreshold,M=u.animationLast,b=u.getAnimationTime(),R=u.animation.timelines.length,I=u.animation.timelines,S=u.timelineData,P=u.timelineDipMix,C=0==u.timelinesRotation.length;C&&i.Utils.setArraySize(u.timelinesRotation,R<<1,null);for(var _,V=u.timelinesRotation,N=u.alpha*a.interruptAlpha,D=N*(1-p),L=0,Y=u.totalAlpha=0;Y<R;Y++){var U=I[Y];switch(S[Y]){case A.SUBSEQUENT:if(!v&&U instanceof i.AttachmentTimeline)continue;if(!E&&U instanceof i.DrawOrderTimeline)continue;_=h,L=D;break;case A.FIRST:_=i.MixPose.setup,L=D;break;case A.DIP:_=i.MixPose.setup,L=N;break;default:_=i.MixPose.setup,L=N;var X=P[Y];L*=Math.max(0,1-X.mixTime/X.mixDuration)}u.totalAlpha+=L,U instanceof i.RotateTimeline?this.applyRotateTimeline(U,s,b,L,_,V,Y<<1,C):(i.Utils.webkit602BugfixHelper(L,_),U.apply(s,M,b,m,L,_,i.MixDirection.out))}return 0<a.mixDuration&&this.queueEvents(u,b),this.events.length=0,u.nextAnimationLast=b,u.nextTrackLast=u.trackTime,p},A.prototype.applyRotateTimeline=function(a,s,h,u,p,m,v,E){if(E&&(m[v]=0),1!=u){var M=a,b=M.frames,R=s.bones[M.boneIndex];if(h<b[0])p==i.MixPose.setup&&(R.rotation=R.data.rotation);else{var I=0;if(h>=b[b.length-i.RotateTimeline.ENTRIES])I=R.data.rotation+b[b.length+i.RotateTimeline.PREV_ROTATION];else{var S=i.Animation.binarySearch(b,h,i.RotateTimeline.ENTRIES),P=b[S+i.RotateTimeline.PREV_ROTATION],C=b[S],_=M.getCurvePercent((S>>1)-1,1-(h-C)/(b[S+i.RotateTimeline.PREV_TIME]-C));I=b[S+i.RotateTimeline.ROTATION]-P,I=P+(I-=360*(16384-(16384.499999999996-I/360|0)))*_+R.data.rotation,I-=360*(16384-(16384.499999999996-I/360|0))}var V=p==i.MixPose.setup?R.data.rotation:R.rotation,N=0,D=I-V;if(0==D)N=m[v];else{D-=360*(16384-(16384.499999999996-D/360|0));var L,Y=0;L=E?(Y=0,D):(Y=m[v],m[v+1]);var U=0<D,X=0<=Y;i.MathUtils.signum(L)!=i.MathUtils.signum(D)&&Math.abs(L)<=90&&(180<Math.abs(Y)&&(Y+=360*i.MathUtils.signum(Y)),X=U),N=D+Y-Y%360,X!=U&&(N+=360*i.MathUtils.signum(Y)),m[v]=N}m[v+1]=D,V+=N*u,R.rotation=V-360*(16384-(16384.499999999996-V/360|0))}}else a.apply(s,0,h,null,1,p,i.MixDirection.in)},A.prototype.queueEvents=function(i,a){for(var s=i.animationStart,h=i.animationEnd,u=h-s,p=i.trackLast%u,m=this.events,v=0,E=m.length;v<E;v++){var M=m[v];if(M.time<p)break;M.time>h||this.queue.event(i,M)}for((i.loop?0==u||p>i.trackTime%u:h<=a&&i.animationLast<h)&&this.queue.complete(i);v<E;v++)m[v].time<s||this.queue.event(i,m[v])},A.prototype.clearTracks=function(){var i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,s=this.tracks.length;a<s;a++)this.clearTrack(a);this.tracks.length=0,this.queue.drainDisabled=i,this.queue.drain()},A.prototype.clearTrack=function(i){if(!(i>=this.tracks.length)){var a=this.tracks[i];if(null!=a){this.queue.end(a),this.disposeNext(a);for(var s=a;;){var h=s.mixingFrom;if(null==h)break;this.queue.end(h),s.mixingFrom=null,s=h}this.tracks[a.trackIndex]=null,this.queue.drain()}}},A.prototype.setCurrent=function(i,a,s){var h=this.expandToIndex(i);this.tracks[i]=a,null!=h&&(s&&this.queue.interrupt(h),a.mixingFrom=h,a.mixTime=0,null!=h.mixingFrom&&0<h.mixDuration&&(a.interruptAlpha*=Math.min(1,h.mixTime/h.mixDuration)),h.timelinesRotation.length=0),this.queue.start(a)},A.prototype.setAnimation=function(i,a,s){var h=this.data.skeletonData.findAnimation(a);if(null==h)throw new Error("Animation not found: "+a);return this.setAnimationWith(i,h,s)},A.prototype.setAnimationWith=function(i,a,s){if(null==a)throw new Error("animation cannot be null.");var h=!0,u=this.expandToIndex(i);null!=u&&(-1==u.nextTrackLast?(this.tracks[i]=u.mixingFrom,this.queue.interrupt(u),this.queue.end(u),this.disposeNext(u),u=u.mixingFrom,h=!1):this.disposeNext(u));var p=this.trackEntry(i,a,s,u);return this.setCurrent(i,p,h),this.queue.drain(),p},A.prototype.addAnimation=function(i,a,s,h){var u=this.data.skeletonData.findAnimation(a);if(null==u)throw new Error("Animation not found: "+a);return this.addAnimationWith(i,u,s,h)},A.prototype.addAnimationWith=function(i,a,s,h){if(null==a)throw new Error("animation cannot be null.");var u=this.expandToIndex(i);if(null!=u)for(;null!=u.next;)u=u.next;var p=this.trackEntry(i,a,s,u);if(null==u)this.setCurrent(i,p,!0),this.queue.drain();else if(u.next=p,h<=0){var m=u.animationEnd-u.animationStart;0!=m?(u.loop?h+=m*(1+(u.trackTime/m|0)):h+=m,h-=this.data.getMix(u.animation,a)):h=0}return p.delay=h,p},A.prototype.setEmptyAnimation=function(i,a){var s=this.setAnimationWith(i,A.emptyAnimation,!1);return s.mixDuration=a,s.trackEnd=a,s},A.prototype.addEmptyAnimation=function(i,a,s){s<=0&&(s-=a);var h=this.addAnimationWith(i,A.emptyAnimation,!1,s);return h.mixDuration=a,h.trackEnd=a,h},A.prototype.setEmptyAnimations=function(i){var a=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var s=0,h=this.tracks.length;s<h;s++){var u=this.tracks[s];null!=u&&this.setEmptyAnimation(u.trackIndex,i)}this.queue.drainDisabled=a,this.queue.drain()},A.prototype.expandToIndex=function(a){return a<this.tracks.length?this.tracks[a]:(i.Utils.ensureArrayCapacity(this.tracks,a-this.tracks.length+1,null),this.tracks.length=a+1,null)},A.prototype.trackEntry=function(i,a,s,h){var u=this.trackEntryPool.obtain();return u.trackIndex=i,u.animation=a,u.loop=s,u.eventThreshold=0,u.attachmentThreshold=0,u.drawOrderThreshold=0,u.animationStart=0,u.animationEnd=a.duration,u.animationLast=-1,u.nextAnimationLast=-1,u.delay=0,u.trackTime=0,u.trackLast=-1,u.nextTrackLast=-1,u.trackEnd=Number.MAX_VALUE,u.timeScale=1,u.alpha=1,u.interruptAlpha=1,u.mixTime=0,u.mixDuration=null==h?0:this.data.getMix(h.animation,a),u},A.prototype.disposeNext=function(i){for(var a=i.next;null!=a;)this.queue.dispose(a),a=a.next;i.next=null},A.prototype._animationsChanged=function(){this.animationsChanged=!1;var i=this.propertyIDs;i.clear();for(var a=this.mixingTo,s=0,h=this.tracks.length;s<h;s++){var u=this.tracks[s];null!=u&&u.setTimelineData(null,a,i)}},A.prototype.getCurrent=function(i){return i>=this.tracks.length?null:this.tracks[i]},A.prototype.addListener=function(i){if(null==i)throw new Error("listener cannot be null.");this.listeners.push(i)},A.prototype.removeListener=function(i){var a=this.listeners.indexOf(i);0<=a&&this.listeners.splice(a,1)},A.prototype.clearListeners=function(){this.listeners.length=0},A.prototype.clearListenerNotifications=function(){this.queue.clear()},A.emptyAnimation=new i.Animation("<empty>",[],0),A.SUBSEQUENT=0,A.FIRST=1,A.DIP=2,A.DIP_MIX=3,A}();i.AnimationState=a;var s=function(){function t(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},t.prototype.setTimelineData=function(s,h,u){null!=s&&h.push(s);var p=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,h,u):this;null!=s&&h.pop();var m=h,v=h.length-1,E=this.animation.timelines,M=this.animation.timelines.length,b=i.Utils.setArraySize(this.timelineData,M);this.timelineDipMix.length=0;var R=i.Utils.setArraySize(this.timelineDipMix,M);t:for(var I=0;I<M;I++){var S=E[I].getPropertyId();if(u.add(S))if(null!=s&&s.hasTimeline(S)){for(var P=v;0<=P;P--){var C=m[P];if(!C.hasTimeline(S)&&0<C.mixDuration){b[I]=a.DIP_MIX,R[I]=C;continue t}}b[I]=a.DIP}else b[I]=a.FIRST;else b[I]=a.SUBSEQUENT}return p},t.prototype.hasTimeline=function(i){for(var a=this.animation.timelines,s=0,h=a.length;s<h;s++)if(a[s].getPropertyId()==i)return!0;return!1},t.prototype.getAnimationTime=function(){if(this.loop){var i=this.animationEnd-this.animationStart;return 0==i?this.animationStart:this.trackTime%i+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(i){this.animationLast=i,this.nextAnimationLast=i},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t}();i.TrackEntry=s;var h,u,p=function(){function t(i){this.objects=[],this.drainDisabled=!1,this.animState=i}return t.prototype.start=function(i){this.objects.push(h.start),this.objects.push(i),this.animState.animationsChanged=!0},t.prototype.interrupt=function(i){this.objects.push(h.interrupt),this.objects.push(i)},t.prototype.end=function(i){this.objects.push(h.end),this.objects.push(i),this.animState.animationsChanged=!0},t.prototype.dispose=function(i){this.objects.push(h.dispose),this.objects.push(i)},t.prototype.complete=function(i){this.objects.push(h.complete),this.objects.push(i)},t.prototype.event=function(i,a){this.objects.push(h.event),this.objects.push(i),this.objects.push(a)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var i=this.objects,a=this.animState.listeners,s=0;s<i.length;s+=2){var u=i[s],p=i[s+1];switch(u){case h.start:null!=p.listener&&p.listener.start&&p.listener.start(p);for(var m=0;m<a.length;m++)a[m].start&&a[m].start(p);break;case h.interrupt:for(null!=p.listener&&p.listener.interrupt&&p.listener.interrupt(p),m=0;m<a.length;m++)a[m].interrupt&&a[m].interrupt(p);break;case h.end:for(null!=p.listener&&p.listener.end&&p.listener.end(p),m=0;m<a.length;m++)a[m].end&&a[m].end(p);case h.dispose:for(null!=p.listener&&p.listener.dispose&&p.listener.dispose(p),m=0;m<a.length;m++)a[m].dispose&&a[m].dispose(p);this.animState.trackEntryPool.free(p);break;case h.complete:for(null!=p.listener&&p.listener.complete&&p.listener.complete(p),m=0;m<a.length;m++)a[m].complete&&a[m].complete(p);break;case h.event:var v=i[2+s++];for(null!=p.listener&&p.listener.event&&p.listener.event(p,v),m=0;m<a.length;m++)a[m].event&&a[m].event(p,v)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();i.EventQueue=p,(u=h=i.EventType||(i.EventType={}))[u.start=0]="start",u[u.interrupt=1]="interrupt",u[u.end=2]="end",u[u.dispose=3]="dispose",u[u.complete=4]="complete",u[u.event=5]="event";var m=function(){function t(){}return t.prototype.start=function(i){},t.prototype.interrupt=function(i){},t.prototype.end=function(i){},t.prototype.dispose=function(i){},t.prototype.complete=function(i){},t.prototype.event=function(i,a){},t}();i.AnimationStateAdapter2=m}(spine||(spine={})),function(i){var a=function(){function t(i){if(this.animationToMixTime={},this.defaultMix=0,null==i)throw new Error("skeletonData cannot be null.");this.skeletonData=i}return t.prototype.setMix=function(i,a,s){var h=this.skeletonData.findAnimation(i);if(null==h)throw new Error("Animation not found: "+i);var u=this.skeletonData.findAnimation(a);if(null==u)throw new Error("Animation not found: "+a);this.setMixWith(h,u,s)},t.prototype.setMixWith=function(i,a,s){if(null==i)throw new Error("from cannot be null.");if(null==a)throw new Error("to cannot be null.");var h=i.name+"."+a.name;this.animationToMixTime[h]=s},t.prototype.getMix=function(i,a){var s=i.name+"."+a.name,h=this.animationToMixTime[s];return void 0===h?this.defaultMix:h},t}();i.AnimationStateData=a}(spine||(spine={})),function(i){var a=function(){function t(i,a){void 0===a&&(a=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=i,this.pathPrefix=a}return t.downloadText=function(i,a,s){var h=new XMLHttpRequest;h.open("GET",i,!0),h.onload=function(){200==h.status?a(h.responseText):s(h.status,h.responseText)},h.onerror=function(){s(h.status,h.responseText)},h.send()},t.downloadBinary=function(i,a,s){var h=new XMLHttpRequest;h.open("GET",i,!0),h.responseType="arraybuffer",h.onload=function(){200==h.status?a(new Uint8Array(h.response)):s(h.status,h.responseText)},h.onerror=function(){s(h.status,h.responseText)},h.send()},t.prototype.loadText=function(i,a,s){var h=this;void 0===a&&(a=null),void 0===s&&(s=null),i=this.pathPrefix+i,this.toLoad++,t.downloadText(i,(function(s){h.assets[i]=s,a&&a(i,s),h.toLoad--,h.loaded++}),(function(a,u){h.errors[i]="Couldn't load text "+i+": status "+status+", "+u,s&&s(i,"Couldn't load text "+i+": status "+status+", "+u),h.toLoad--,h.loaded++}))},t.prototype.loadTexture=function(i,a,s){var h=this;void 0===a&&(a=null),void 0===s&&(s=null),i=this.pathPrefix+i,this.toLoad++;var u=new Image;u.crossOrigin="anonymous",u.onload=function(s){var p=h.textureLoader(u);h.assets[i]=p,h.toLoad--,h.loaded++,a&&a(i,u)},u.onerror=function(a){h.errors[i]="Couldn't load image "+i,h.toLoad--,h.loaded++,s&&s(i,"Couldn't load image "+i)},u.src=i},t.prototype.loadTextureData=function(i,a,s,h){var u=this;void 0===s&&(s=null),void 0===h&&(h=null),i=this.pathPrefix+i,this.toLoad++;var p=new Image;p.onload=function(a){var h=u.textureLoader(p);u.assets[i]=h,u.toLoad--,u.loaded++,s&&s(i,p)},p.onerror=function(a){u.errors[i]="Couldn't load image "+i,u.toLoad--,u.loaded++,h&&h(i,"Couldn't load image "+i)},p.src=a},t.prototype.loadTextureAtlas=function(a,s,h){var u=this;void 0===s&&(s=null),void 0===h&&(h=null);var p=0<=a.lastIndexOf("/")?a.substring(0,a.lastIndexOf("/")):"";a=this.pathPrefix+a,this.toLoad++,t.downloadText(a,(function(m){var v={count:0},E=new Array;try{new i.TextureAtlas(m,(function(a){E.push(p+"/"+a);var s=document.createElement("img");return s.width=16,s.height=16,new i.FakeTexture(s)}))}catch(t){var M=t;return u.errors[a]="Couldn't load texture atlas "+a+": "+M.message,h&&h(a,"Couldn't load texture atlas "+a+": "+M.message),u.toLoad--,void u.loaded++}for(var t=function(M){var b=!1;u.loadTexture(M,(function(M,R){if(v.count++,v.count==E.length)if(b)u.errors[a]="Couldn't load texture atlas page "+M+"} of atlas "+a,h&&h(a,"Couldn't load texture atlas page "+M+" of atlas "+a),u.toLoad--,u.loaded++;else try{var I=new i.TextureAtlas(m,(function(i){return u.get(p+"/"+i)}));u.assets[a]=I,s&&s(a,I),u.toLoad--,u.loaded++}catch(M){var S=M;u.errors[a]="Couldn't load texture atlas "+a+": "+S.message,h&&h(a,"Couldn't load texture atlas "+a+": "+S.message),u.toLoad--,u.loaded++}}),(function(i,s){b=!0,v.count++,v.count==E.length&&(u.errors[a]="Couldn't load texture atlas page "+i+"} of atlas "+a,h&&h(a,"Couldn't load texture atlas page "+i+" of atlas "+a),u.toLoad--,u.loaded++)}))},b=0,R=E;b<R.length;b++)t(R[b])}),(function(i,s){u.errors[a]="Couldn't load texture atlas "+a+": status "+status+", "+s,h&&h(a,"Couldn't load texture atlas "+a+": status "+status+", "+s),u.toLoad--,u.loaded++}))},t.prototype.get=function(i){return i=this.pathPrefix+i,this.assets[i]},t.prototype.remove=function(i){i=this.pathPrefix+i;var a=this.assets[i];a.dispose&&a.dispose(),this.assets[i]=null},t.prototype.removeAll=function(){for(var i in this.assets){var a=this.assets[i];a.dispose&&a.dispose()}this.assets={}},t.prototype.isLoadingComplete=function(){return 0==this.toLoad},t.prototype.getToLoad=function(){return this.toLoad},t.prototype.getLoaded=function(){return this.loaded},t.prototype.dispose=function(){this.removeAll()},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},t}();i.AssetManager=a}(spine||(spine={})),function(i){var a=function(){function t(i){this.atlas=i}return t.prototype.newRegionAttachment=function(a,s,h){var u=this.atlas.findRegion(h);if(null==u)throw new Error("Region not found in atlas: "+h+" (region attachment: "+s+")");u.renderObject=u;var p=new i.RegionAttachment(s);return p.setRegion(u),p},t.prototype.newMeshAttachment=function(a,s,h){var u=this.atlas.findRegion(h);if(null==u)throw new Error("Region not found in atlas: "+h+" (mesh attachment: "+s+")");u.renderObject=u;var p=new i.MeshAttachment(s);return p.region=u,p},t.prototype.newBoundingBoxAttachment=function(a,s){return new i.BoundingBoxAttachment(s)},t.prototype.newPathAttachment=function(a,s){return new i.PathAttachment(s)},t.prototype.newPointAttachment=function(a,s){return new i.PointAttachment(s)},t.prototype.newClippingAttachment=function(a,s){return new i.ClippingAttachment(s)},t}();i.AtlasAttachmentLoader=a}(spine||(spine={})),function(i){var a;(a=i.BlendMode||(i.BlendMode={}))[a.Normal=0]="Normal",a[a.Additive=1]="Additive",a[a.Multiply=2]="Multiply",a[a.Screen=3]="Screen"}(spine||(spine={})),function(i){var a=function(){function t(i,a,s){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.worldX=0,this.c=0,this.d=0,this.worldY=0,this.sorted=!1,null==i)throw new Error("data cannot be null.");if(null==a)throw new Error("skeleton cannot be null.");this.data=i,this.skeleton=a,this.parent=s,this.setToSetupPose()}return t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(a,s,h,u,p,m,v){this.ax=a,this.ay=s,this.arotation=h,this.ascaleX=u,this.ascaleY=p,this.ashearX=m,this.ashearY=v,this.appliedValid=!0;var E=this.parent;if(null==E){var M=h+90+v,b=i.MathUtils.cosDeg(h+m)*u,R=i.MathUtils.cosDeg(M)*p,I=i.MathUtils.sinDeg(h+m)*u,S=i.MathUtils.sinDeg(M)*p,P=this.skeleton;return P.flipX&&(a=-a,b=-b,R=-R),P.flipY&&(s=-s,I=-I,S=-S),this.a=b,this.b=R,this.c=I,this.d=S,this.worldX=a+P.x,void(this.worldY=s+P.y)}var C=E.a,_=E.b,V=E.c,N=E.d;switch(this.worldX=C*a+_*s+E.worldX,this.worldY=V*a+N*s+E.worldY,this.data.transformMode){case i.TransformMode.Normal:return M=h+90+v,b=i.MathUtils.cosDeg(h+m)*u,R=i.MathUtils.cosDeg(M)*p,I=i.MathUtils.sinDeg(h+m)*u,S=i.MathUtils.sinDeg(M)*p,this.a=C*b+_*I,this.b=C*R+_*S,this.c=V*b+N*I,void(this.d=V*R+N*S);case i.TransformMode.OnlyTranslation:M=h+90+v,this.a=i.MathUtils.cosDeg(h+m)*u,this.b=i.MathUtils.cosDeg(M)*p,this.c=i.MathUtils.sinDeg(h+m)*u,this.d=i.MathUtils.sinDeg(M)*p;break;case i.TransformMode.NoRotationOrReflection:var D,L=h+m-(D=1e-4<(U=C*C+V*V)?(_=V*(U=Math.abs(C*N-_*V)/U),N=C*U,Math.atan2(V,C)*i.MathUtils.radDeg):(V=C=0,90-Math.atan2(N,_)*i.MathUtils.radDeg)),Y=h+v-D+90;b=i.MathUtils.cosDeg(L)*u,R=i.MathUtils.cosDeg(Y)*p,I=i.MathUtils.sinDeg(L)*u,S=i.MathUtils.sinDeg(Y)*p,this.a=C*b-_*I,this.b=C*R-_*S,this.c=V*b+N*I,this.d=V*R+N*S;break;case i.TransformMode.NoScale:case i.TransformMode.NoScaleOrReflection:var U,X=i.MathUtils.cosDeg(h),F=i.MathUtils.sinDeg(h),B=C*X+_*F,W=V*X+N*F;1e-5<(U=Math.sqrt(B*B+W*W))&&(U=1/U),B*=U,W*=U,U=Math.sqrt(B*B+W*W);var q=Math.PI/2+Math.atan2(W,B),j=Math.cos(q)*U,G=Math.sin(q)*U;return b=i.MathUtils.cosDeg(m)*u,R=i.MathUtils.cosDeg(90+v)*p,I=i.MathUtils.sinDeg(m)*u,S=i.MathUtils.sinDeg(90+v)*p,(this.data.transformMode!=i.TransformMode.NoScaleOrReflection?C*N-_*V<0:this.skeleton.flipX!=this.skeleton.flipY)&&(j=-j,G=-G),this.a=B*b+j*I,this.b=B*R+j*S,this.c=W*b+G*I,void(this.d=W*R+G*S)}this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY&&(this.c=-this.c,this.d=-this.d)},t.prototype.setToSetupPose=function(){var i=this.data;this.x=i.x,this.y=i.y,this.rotation=i.rotation,this.scaleX=i.scaleX,this.scaleY=i.scaleY,this.shearX=i.shearX,this.shearY=i.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*i.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*i.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},t.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var a=this.parent;if(null==a)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*i.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*i.MathUtils.radDeg);var s=a.a,h=a.b,u=a.c,p=a.d,m=1/(s*p-h*u),v=this.worldX-a.worldX,E=this.worldY-a.worldY;this.ax=v*p*m-E*h*m,this.ay=E*s*m-v*u*m;var M=m*p,b=m*s,R=m*h,I=m*u,S=M*this.a-R*this.c,P=M*this.b-R*this.d,C=b*this.c-I*this.a,_=b*this.d-I*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(S*S+C*C),1e-4<this.ascaleX){var V=S*_-P*C;this.ascaleY=V/this.ascaleX,this.ashearY=Math.atan2(S*P+C*_,V)*i.MathUtils.radDeg,this.arotation=Math.atan2(C,S)*i.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(P*P+_*_),this.ashearY=0,this.arotation=90-Math.atan2(_,P)*i.MathUtils.radDeg},t.prototype.worldToLocal=function(i){var a=this.a,s=this.b,h=this.c,u=this.d,p=1/(a*u-s*h),m=i.x-this.worldX,v=i.y-this.worldY;return i.x=m*u*p-v*s*p,i.y=v*a*p-m*h*p,i},t.prototype.localToWorld=function(i){var a=i.x,s=i.y;return i.x=a*this.a+s*this.b+this.worldX,i.y=a*this.c+s*this.d+this.worldY,i},t.prototype.worldToLocalRotation=function(a){var s=i.MathUtils.sinDeg(a),h=i.MathUtils.cosDeg(a);return Math.atan2(this.a*s-this.c*h,this.d*h-this.b*s)*i.MathUtils.radDeg},t.prototype.localToWorldRotation=function(a){var s=i.MathUtils.sinDeg(a),h=i.MathUtils.cosDeg(a);return Math.atan2(h*this.c+s*this.d,h*this.a+s*this.b)*i.MathUtils.radDeg},t.prototype.rotateWorld=function(a){var s=this.a,h=this.b,u=this.c,p=this.d,m=i.MathUtils.cosDeg(a),v=i.MathUtils.sinDeg(a);this.a=m*s-v*u,this.b=m*h-v*p,this.c=v*s+m*u,this.d=v*h+m*p,this.appliedValid=!1},t}();i.Bone=a}(spine||(spine={})),function(i){var a,s;i.BoneData=function(i,s,h){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.Normal,i<0)throw new Error("index must be >= 0.");if(null==s)throw new Error("name cannot be null.");this.index=i,this.name=s,this.parent=h},(s=a=i.TransformMode||(i.TransformMode={}))[s.Normal=0]="Normal",s[s.OnlyTranslation=1]="OnlyTranslation",s[s.NoRotationOrReflection=2]="NoRotationOrReflection",s[s.NoScale=3]="NoScale",s[s.NoScaleOrReflection=4]="NoScaleOrReflection"}(spine||(spine={})),(spine||(spine={})).Event=function(i,a){if(null==a)throw new Error("data cannot be null.");this.time=i,this.data=a},(spine||(spine={})).EventData=function(i){this.name=i},function(i){var a=function(){function t(i,a){if(this.mix=1,this.bendDirection=0,null==i)throw new Error("data cannot be null.");if(null==a)throw new Error("skeleton cannot be null.");this.data=i,this.mix=i.mix,this.bendDirection=i.bendDirection,this.bones=new Array;for(var s=0;s<i.bones.length;s++)this.bones.push(a.findBone(i.bones[s].name));this.target=a.findBone(i.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var i=this.target,a=this.bones;switch(a.length){case 1:this.apply1(a[0],i.worldX,i.worldY,this.mix);break;case 2:this.apply2(a[0],a[1],i.worldX,i.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(a,s,h,u){a.appliedValid||a.updateAppliedTransform();var p=a.parent,m=1/(p.a*p.d-p.b*p.c),v=s-p.worldX,E=h-p.worldY,M=(v*p.d-E*p.b)*m-a.ax,b=(E*p.a-v*p.c)*m-a.ay,R=Math.atan2(b,M)*i.MathUtils.radDeg-a.ashearX-a.arotation;a.ascaleX<0&&(R+=180),180<R?R-=360:R<-180&&(R+=360),a.updateWorldTransformWith(a.ax,a.ay,a.arotation+R*u,a.ascaleX,a.ascaleY,a.ashearX,a.ashearY)},t.prototype.apply2=function(a,s,h,u,p,m){if(0!=m){a.appliedValid||a.updateAppliedTransform(),s.appliedValid||s.updateAppliedTransform();var v,E=a.ax,M=a.ay,b=a.ascaleX,R=a.ascaleY,I=s.ascaleX,S=0,P=0;P=b<0?(b=-b,S=180,-1):(S=0,1),R<0&&(R=-R,P=-P),v=I<0?(I=-I,180):0;var C,_=s.ax,V=0,N=0,D=a.a,L=a.b,Y=a.c,U=a.d,X=Math.abs(b-R)<=1e-4;C=X?(N=D*_+L*(V=s.ay)+a.worldX,Y*_+U*V+a.worldY):(V=0,N=D*_+a.worldX,Y*_+a.worldY);var F=a.parent;D=F.a,L=F.b,Y=F.c;var B=1/(D*(U=F.d)-L*Y),W=h-F.worldX,q=u-F.worldY,j=(W*U-q*L)*B-E,G=(q*D-W*Y)*B-M,z=((W=N-F.worldX)*U-(q=C-F.worldY)*L)*B-E,H=(q*D-W*Y)*B-M,J=Math.sqrt(z*z+H*H),Q=s.data.length*I,K=0,$=0;t:if(X){var tt=(j*j+G*G-J*J-(Q*=b)*Q)/(2*J*Q);tt<-1?tt=-1:1<tt&&(tt=1),$=Math.acos(tt)*p,D=J+Q*tt,L=Q*Math.sin($),K=Math.atan2(G*D-j*L,j*D+G*L)}else{var et=(D=b*Q)*D,nt=(L=R*Q)*L,rt=j*j+G*G,it=Math.atan2(G,j),at=-2*nt*J,st=nt-et;if(0<=(U=at*at-4*st*(Y=nt*J*J+et*rt-et*nt))){var ot=Math.sqrt(U);at<0&&(ot=-ot);var ht=(ot=-(at+ot)/2)/st,lt=Y/ot,ut=Math.abs(ht)<Math.abs(lt)?ht:lt;if(ut*ut<=rt){q=Math.sqrt(rt-ut*ut)*p,K=it-Math.atan2(q,ut),$=Math.atan2(q/R,(ut-J)/b);break t}}var ct=i.MathUtils.PI,pt=J-D,ft=pt*pt,dt=0,mt=0,gt=J+D,vt=gt*gt,yt=0;-1<=(Y=-D*J/(et-nt))&&Y<=1&&(Y=Math.acos(Y),(U=(W=D*Math.cos(Y)+J)*W+(q=L*Math.sin(Y))*q)<ft&&(ct=Y,ft=U,pt=W,dt=q),vt<U&&(mt=Y,vt=U,gt=W,yt=q)),$=rt<=(ft+vt)/2?(K=it-Math.atan2(dt*p,pt),ct*p):(K=it-Math.atan2(yt*p,gt),mt*p)}var xt=Math.atan2(V,_)*P,wt=a.arotation;180<(K=(K-xt)*i.MathUtils.radDeg+S-wt)?K-=360:K<-180&&(K+=360),a.updateWorldTransformWith(E,M,wt+K*m,a.ascaleX,a.ascaleY,0,0),wt=s.arotation,180<($=(($+xt)*i.MathUtils.radDeg-s.ashearX)*P+v-wt)?$-=360:$<-180&&($+=360),s.updateWorldTransformWith(_,V,wt+$*m,s.ascaleX,s.ascaleY,s.ashearX,s.ashearY)}else s.updateWorldTransform()},t}();i.IkConstraint=a}(spine||(spine={})),(spine||(spine={})).IkConstraintData=function(i){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=i},function(i){var a=function(){function Z(i,a){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==i)throw new Error("data cannot be null.");if(null==a)throw new Error("skeleton cannot be null.");this.data=i,this.bones=new Array;for(var s=0,h=i.bones.length;s<h;s++)this.bones.push(a.findBone(i.bones[s].name));this.target=a.findSlot(i.target.name),this.position=i.position,this.spacing=i.spacing,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix}return Z.prototype.apply=function(){this.update()},Z.prototype.update=function(){var a=this.target.getAttachment();if(a instanceof i.PathAttachment){var s=this.rotateMix,h=this.translateMix,u=0<s;if(0<h||u){var p=this.data,m=p.spacingMode,v=m==i.SpacingMode.Length,E=p.rotateMode,M=E==i.RotateMode.Tangent,b=E==i.RotateMode.ChainScale,R=this.bones.length,I=M?R:R+1,S=this.bones,P=i.Utils.setArraySize(this.spaces,I),C=null,_=this.spacing;if(b||v){b&&(C=i.Utils.setArraySize(this.lengths,R));for(var V=0,N=I-1;V<N;){var D=(G=S[V]).data.length;if(D<Z.epsilon)b&&(C[V]=0),P[++V]=0;else{var L=D*G.a,Y=D*G.c,U=Math.sqrt(L*L+Y*Y);b&&(C[V]=U),P[++V]=(v?D+_:_)*U/D}}}else for(V=1;V<I;V++)P[V]=_;var X=this.computeWorldPositions(a,I,M,p.positionMode==i.PositionMode.Percent,m==i.SpacingMode.Percent),F=X[0],B=X[1],W=p.offsetRotation,q=!1;0==W?q=E==i.RotateMode.Chain:(q=!1,W*=0<(j=this.target.bone).a*j.d-j.b*j.c?i.MathUtils.degRad:-i.MathUtils.degRad),V=0;for(var j=3;V<R;V++,j+=3){var G;(G=S[V]).worldX+=(F-G.worldX)*h,G.worldY+=(B-G.worldY)*h;var z=(L=X[j])-F,H=(Y=X[j+1])-B;if(b){var J=C[V];if(0!=J){var Q=(Math.sqrt(z*z+H*H)/J-1)*s+1;G.a*=Q,G.c*=Q}}if(F=L,B=Y,u){var K=G.a,$=G.b,tt=G.c,et=G.d,nt=0,rt=0,it=0;if(nt=M?X[j-1]:0==P[V+1]?X[j+2]:Math.atan2(H,z),nt-=Math.atan2(tt,K),q){rt=Math.cos(nt),it=Math.sin(nt);var at=G.data.length;F+=(at*(rt*K-it*tt)-z)*s,B+=(at*(it*K+rt*tt)-H)*s}else nt+=W;nt>i.MathUtils.PI?nt-=i.MathUtils.PI2:nt<-i.MathUtils.PI&&(nt+=i.MathUtils.PI2),nt*=s,rt=Math.cos(nt),it=Math.sin(nt),G.a=rt*K-it*tt,G.b=rt*$-it*et,G.c=it*K+rt*tt,G.d=it*$+rt*et}G.appliedValid=!1}}}},Z.prototype.computeWorldPositions=function(a,s,h,u,p){var m=this.target,v=this.position,E=this.spaces,M=i.Utils.setArraySize(this.positions,3*s+2),b=null,R=a.closed,I=a.worldVerticesLength,S=I/6,P=Z.NONE;if(!a.constantSpeed){var C=a.lengths,_=C[S-=R?1:2];if(u&&(v*=_),p)for(var V=0;V<s;V++)E[V]*=_;b=i.Utils.setArraySize(this.world,8),V=0;for(var N=0,D=0;V<s;V++,N+=3){var L=v+=ht=E[V];if(R)(L%=_)<0&&(L+=_),D=0;else{if(L<0){P!=Z.BEFORE&&(P=Z.BEFORE,a.computeWorldVertices(m,2,4,b,0,2)),this.addBeforePosition(L,b,0,M,N);continue}if(_<L){P!=Z.AFTER&&(P=Z.AFTER,a.computeWorldVertices(m,I-6,4,b,0,2)),this.addAfterPosition(L-_,b,0,M,N);continue}}for(;;D++){var Y=C[D];if(!(Y<L)){0==D?L/=Y:L=(L-(pt=C[D-1]))/(Y-pt);break}}D!=P&&(P=D,R&&D==S?(a.computeWorldVertices(m,I-4,4,b,0,2),a.computeWorldVertices(m,0,4,b,4,2)):a.computeWorldVertices(m,6*D+2,8,b,0,2)),this.addCurvePosition(L,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],M,N,h||0<V&&0==ht)}return M}R?(I+=2,b=i.Utils.setArraySize(this.world,I),a.computeWorldVertices(m,2,I-4,b,0,2),a.computeWorldVertices(m,0,2,b,I-4,2),b[I-2]=b[0],b[I-1]=b[1]):(S--,I-=4,b=i.Utils.setArraySize(this.world,I),a.computeWorldVertices(m,2,I,b,0,2));for(var U=i.Utils.setArraySize(this.curves,S),X=0,F=b[0],B=b[1],W=0,q=0,j=0,G=0,z=0,H=0,J=0,Q=0,K=0,$=0,tt=0,et=0,nt=0,rt=0,it=(V=0,2);V<S;V++,it+=6)W=b[it],q=b[it+1],j=b[it+2],G=b[it+3],tt=2*(J=.1875*(F-2*W+j))+(K=.09375*(3*(W-j)-F+(z=b[it+4]))),et=2*(Q=.1875*(B-2*q+G))+($=.09375*(3*(q-G)-B+(H=b[it+5]))),nt=.75*(W-F)+J+.16666667*K,rt=.75*(q-B)+Q+.16666667*$,X+=Math.sqrt(nt*nt+rt*rt),nt+=tt,rt+=et,tt+=K,et+=$,X+=Math.sqrt(nt*nt+rt*rt),nt+=tt,rt+=et,X+=Math.sqrt(nt*nt+rt*rt),nt+=tt+K,rt+=et+$,X+=Math.sqrt(nt*nt+rt*rt),U[V]=X,F=z,B=H;if(u&&(v*=X),p)for(V=0;V<s;V++)E[V]*=X;for(var at=this.segments,st=0,ot=(V=0,N=0,D=0,0);V<s;V++,N+=3){var ht;if(L=v+=ht=E[V],R)(L%=X)<0&&(L+=X),D=0;else{if(L<0){this.addBeforePosition(L,b,0,M,N);continue}if(X<L){this.addAfterPosition(L-X,b,I-4,M,N);continue}}for(;;D++){var lt=U[D];if(!(lt<L)){0==D?L/=lt:L=(L-(pt=U[D-1]))/(lt-pt);break}}if(D!=P){var ut=6*(P=D);for(F=b[ut],B=b[ut+1],W=b[ut+2],q=b[ut+3],j=b[ut+4],G=b[ut+5],tt=2*(J=.03*(F-2*W+j))+(K=.006*(3*(W-j)-F+(z=b[ut+6]))),et=2*(Q=.03*(B-2*q+G))+($=.006*(3*(q-G)-B+(H=b[ut+7]))),nt=.3*(W-F)+J+.16666667*K,rt=.3*(q-B)+Q+.16666667*$,st=Math.sqrt(nt*nt+rt*rt),at[0]=st,ut=1;ut<8;ut++)nt+=tt,rt+=et,tt+=K,et+=$,st+=Math.sqrt(nt*nt+rt*rt),at[ut]=st;nt+=tt,rt+=et,st+=Math.sqrt(nt*nt+rt*rt),at[8]=st,nt+=tt+K,rt+=et+$,st+=Math.sqrt(nt*nt+rt*rt),at[9]=st,ot=0}for(L*=st;;ot++){var ct=at[ot];if(!(ct<L)){var pt;0==ot?L/=ct:L=ot+(L-(pt=at[ot-1]))/(ct-pt);break}}this.addCurvePosition(.1*L,F,B,W,q,j,G,z,H,M,N,h||0<V&&0==ht)}return M},Z.prototype.addBeforePosition=function(i,a,s,h,u){var p=a[s],m=a[s+1],v=a[s+2]-p,E=a[s+3]-m,M=Math.atan2(E,v);h[u]=p+i*Math.cos(M),h[u+1]=m+i*Math.sin(M),h[u+2]=M},Z.prototype.addAfterPosition=function(i,a,s,h,u){var p=a[s+2],m=a[s+3],v=p-a[s],E=m-a[s+1],M=Math.atan2(E,v);h[u]=p+i*Math.cos(M),h[u+1]=m+i*Math.sin(M),h[u+2]=M},Z.prototype.addCurvePosition=function(i,a,s,h,u,p,m,v,E,M,b,R){(0==i||isNaN(i))&&(i=1e-4);var I=i*i,S=I*i,P=1-i,C=P*P,_=C*P,V=P*i,N=3*V,D=P*N,L=N*i,Y=a*_+h*D+p*L+v*S,U=s*_+u*D+m*L+E*S;M[b]=Y,M[b+1]=U,R&&(M[b+2]=Math.atan2(U-(s*C+u*V*2+m*I),Y-(a*C+h*V*2+p*I)))},Z.prototype.getOrder=function(){return this.data.order},Z.NONE=-1,Z.BEFORE=-2,Z.AFTER=-3,Z.epsilon=1e-5,Z}();i.PathConstraint=a}(spine||(spine={})),function(i){var a,s,h;i.PathConstraintData=function(i){this.order=0,this.bones=new Array,this.name=i},(a=i.PositionMode||(i.PositionMode={}))[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent",(s=i.SpacingMode||(i.SpacingMode={}))[s.Length=0]="Length",s[s.Fixed=1]="Fixed",s[s.Percent=2]="Percent",(h=i.RotateMode||(i.RotateMode={}))[h.Tangent=0]="Tangent",h[h.Chain=1]="Chain",h[h.ChainScale=2]="ChainScale"}(spine||(spine={})),function(i){var a=function(){function t(i){this.toLoad=new Array,this.assets={},this.clientId=i}return t.prototype.loaded=function(){var i=0;for(var a in this.assets)i++;return i},t}(),s=function(){function t(i){void 0===i&&(i=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=i}return t.prototype.queueAsset=function(i,s,h){var u=this.clientAssets[i];return null==u&&(u=new a(i),this.clientAssets[i]=u),null!==s&&(u.textureLoader=s),u.toLoad.push(h),this.queuedAssets[h]!==h&&(this.queuedAssets[h]=h,!0)},t.prototype.loadText=function(i,a){var s=this;if(a=this.pathPrefix+a,this.queueAsset(i,null,a)){var h=new XMLHttpRequest;h.onreadystatechange=function(){h.readyState==XMLHttpRequest.DONE&&(200<=h.status&&h.status<300?s.rawAssets[a]=h.responseText:s.errors[a]="Couldn't load text "+a+": status "+h.status+", "+h.responseText)},h.open("GET",a,!0),h.send()}},t.prototype.loadJson=function(i,a){var s=this;if(a=this.pathPrefix+a,this.queueAsset(i,null,a)){var h=new XMLHttpRequest;h.onreadystatechange=function(){h.readyState==XMLHttpRequest.DONE&&(200<=h.status&&h.status<300?s.rawAssets[a]=JSON.parse(h.responseText):s.errors[a]="Couldn't load text "+a+": status "+h.status+", "+h.responseText)},h.open("GET",a,!0),h.send()}},t.prototype.loadTexture=function(i,a,s){var h=this;if(s=this.pathPrefix+s,this.queueAsset(i,a,s)){var u=new Image;u.src=s,u.crossOrigin="anonymous",u.onload=function(i){h.rawAssets[s]=u},u.onerror=function(i){h.errors[s]="Couldn't load image "+s}}},t.prototype.get=function(i,a){a=this.pathPrefix+a;var s=this.clientAssets[i];return null==s||s.assets[a]},t.prototype.updateClientAssets=function(i){for(var a=0;a<i.toLoad.length;a++){var s=i.toLoad[a];if(null==i.assets[s]){var h=this.rawAssets[s];if(null==h)continue;h instanceof HTMLImageElement?i.assets[s]=i.textureLoader(h):i.assets[s]=h}}},t.prototype.isLoadingComplete=function(i){var a=this.clientAssets[i];return null==a||(this.updateClientAssets(a),a.toLoad.length==a.loaded())},t.prototype.dispose=function(){},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},t}();i.SharedAssetManager=s}(spine||(spine={})),function(i){var a=function(){function t(a){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==a)throw new Error("data cannot be null.");this.data=a,this.bones=new Array;for(var s=0;s<a.bones.length;s++){var h=a.bones[s],u=void 0;if(null==h.parent)u=new i.Bone(h,this,null);else{var p=this.bones[h.parent.index];u=new i.Bone(h,this,p),p.children.push(u)}this.bones.push(u)}for(this.slots=new Array,this.drawOrder=new Array,s=0;s<a.slots.length;s++){var m=a.slots[s],v=(u=this.bones[m.boneData.index],new i.Slot(m,u));this.slots.push(v),this.drawOrder.push(v)}for(this.ikConstraints=new Array,s=0;s<a.ikConstraints.length;s++){var E=a.ikConstraints[s];this.ikConstraints.push(new i.IkConstraint(E,this))}for(this.transformConstraints=new Array,s=0;s<a.transformConstraints.length;s++){var M=a.transformConstraints[s];this.transformConstraints.push(new i.TransformConstraint(M,this))}for(this.pathConstraints=new Array,s=0;s<a.pathConstraints.length;s++){var b=a.pathConstraints[s];this.pathConstraints.push(new i.PathConstraint(b,this))}this.color=new i.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var i=this.bones,a=0,s=i.length;a<s;a++)i[a].sorted=!1;var h=this.ikConstraints,u=this.transformConstraints,p=this.pathConstraints,m=h.length,v=u.length,E=p.length,M=m+v+E;t:for(a=0;a<M;a++){for(var b=0;b<m;b++)if((R=h[b]).data.order==a){this.sortIkConstraint(R);continue t}for(b=0;b<v;b++)if((R=u[b]).data.order==a){this.sortTransformConstraint(R);continue t}for(b=0;b<E;b++){var R;if((R=p[b]).data.order==a){this.sortPathConstraint(R);continue t}}}for(a=0,s=i.length;a<s;a++)this.sortBone(i[a])},t.prototype.sortIkConstraint=function(i){var a=i.target;this.sortBone(a);var s=i.bones,h=s[0];if(this.sortBone(h),1<s.length){var u=s[s.length-1];-1<this._updateCache.indexOf(u)||this.updateCacheReset.push(u)}this._updateCache.push(i),this.sortReset(h.children),s[s.length-1].sorted=!0},t.prototype.sortPathConstraint=function(a){var s=a.target,h=s.data.index,u=s.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,h,u),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,h,u);for(var p=0,m=this.data.skins.length;p<m;p++)this.sortPathConstraintAttachment(this.data.skins[p],h,u);var v=s.getAttachment();v instanceof i.PathAttachment&&this.sortPathConstraintAttachmentWith(v,u);var E=a.bones,M=E.length;for(p=0;p<M;p++)this.sortBone(E[p]);for(this._updateCache.push(a),p=0;p<M;p++)this.sortReset(E[p].children);for(p=0;p<M;p++)E[p].sorted=!0},t.prototype.sortTransformConstraint=function(i){this.sortBone(i.target);var a=i.bones,s=a.length;if(i.data.local)for(var h=0;h<s;h++){var u=a[h];this.sortBone(u.parent),-1<this._updateCache.indexOf(u)||this.updateCacheReset.push(u)}else for(h=0;h<s;h++)this.sortBone(a[h]);this._updateCache.push(i);for(var p=0;p<s;p++)this.sortReset(a[p].children);for(p=0;p<s;p++)a[p].sorted=!0},t.prototype.sortPathConstraintAttachment=function(i,a,s){var h=i.attachments[a];if(h)for(var u in h)this.sortPathConstraintAttachmentWith(h[u],s)},t.prototype.sortPathConstraintAttachmentWith=function(a,s){if(a instanceof i.PathAttachment){var h=a.bones;if(null==h)this.sortBone(s);else for(var u=this.bones,p=0;p<h.length;)for(var m=h[p++],v=p+m;p<v;p++){var E=h[p];this.sortBone(u[E])}}},t.prototype.sortBone=function(i){if(!i.sorted){var a=i.parent;null!=a&&this.sortBone(a),i.sorted=!0,this._updateCache.push(i)}},t.prototype.sortReset=function(i){for(var a=0,s=i.length;a<s;a++){var h=i[a];h.sorted&&this.sortReset(h.children),h.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var i=this.updateCacheReset,a=0,s=i.length;a<s;a++){var h=i[a];h.ax=h.x,h.ay=h.y,h.arotation=h.rotation,h.ascaleX=h.scaleX,h.ascaleY=h.scaleY,h.ashearX=h.shearX,h.ashearY=h.shearY,h.appliedValid=!0}var u=this._updateCache;for(a=0,s=u.length;a<s;a++)u[a].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var i=this.bones,a=0,s=i.length;a<s;a++)i[a].setToSetupPose();var h=this.ikConstraints;for(a=0,s=h.length;a<s;a++)(v=h[a]).bendDirection=v.data.bendDirection,v.mix=v.data.mix;var u=this.transformConstraints;for(a=0,s=u.length;a<s;a++){var p=(v=u[a]).data;v.rotateMix=p.rotateMix,v.translateMix=p.translateMix,v.scaleMix=p.scaleMix,v.shearMix=p.shearMix}var m=this.pathConstraints;for(a=0,s=m.length;a<s;a++){var v;p=(v=m[a]).data,v.position=p.position,v.spacing=p.spacing,v.rotateMix=p.rotateMix,v.translateMix=p.translateMix}},t.prototype.setSlotsToSetupPose=function(){var a=this.slots;i.Utils.arrayCopy(a,0,this.drawOrder,0,a.length);for(var s=0,h=a.length;s<h;s++)a[s].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(i){if(null==i)throw new Error("boneName cannot be null.");for(var a=this.bones,s=0,h=a.length;s<h;s++){var u=a[s];if(u.data.name==i)return u}return null},t.prototype.findBoneIndex=function(i){if(null==i)throw new Error("boneName cannot be null.");for(var a=this.bones,s=0,h=a.length;s<h;s++)if(a[s].data.name==i)return s;return-1},t.prototype.findSlot=function(i){if(null==i)throw new Error("slotName cannot be null.");for(var a=this.slots,s=0,h=a.length;s<h;s++){var u=a[s];if(u.data.name==i)return u}return null},t.prototype.findSlotIndex=function(i){if(null==i)throw new Error("slotName cannot be null.");for(var a=this.slots,s=0,h=a.length;s<h;s++)if(a[s].data.name==i)return s;return-1},t.prototype.setSkinByName=function(i){var a=this.data.findSkin(i);if(null==a)throw new Error("Skin not found: "+i);this.setSkin(a)},t.prototype.setSkin=function(i){if(null!=i)if(null!=this.skin)i.attachAll(this,this.skin);else for(var a=this.slots,s=0,h=a.length;s<h;s++){var u=a[s],p=u.data.attachmentName;if(null!=p){var m=i.getAttachment(s,p);null!=m&&u.setAttachment(m)}}this.skin=i},t.prototype.getAttachmentByName=function(i,a){return this.getAttachment(this.data.findSlotIndex(i),a)},t.prototype.getAttachment=function(i,a){if(null==a)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var s=this.skin.getAttachment(i,a);if(null!=s)return s}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(i,a):null},t.prototype.setAttachment=function(i,a){if(null==i)throw new Error("slotName cannot be null.");for(var s=this.slots,h=0,u=s.length;h<u;h++){var p=s[h];if(p.data.name==i){var m=null;if(null!=a&&null==(m=this.getAttachment(h,a)))throw new Error("Attachment not found: "+a+", for slot: "+i);return void p.setAttachment(m)}}throw new Error("Slot not found: "+i)},t.prototype.findIkConstraint=function(i){if(null==i)throw new Error("constraintName cannot be null.");for(var a=this.ikConstraints,s=0,h=a.length;s<h;s++){var u=a[s];if(u.data.name==i)return u}return null},t.prototype.findTransformConstraint=function(i){if(null==i)throw new Error("constraintName cannot be null.");for(var a=this.transformConstraints,s=0,h=a.length;s<h;s++){var u=a[s];if(u.data.name==i)return u}return null},t.prototype.findPathConstraint=function(i){if(null==i)throw new Error("constraintName cannot be null.");for(var a=this.pathConstraints,s=0,h=a.length;s<h;s++){var u=a[s];if(u.data.name==i)return u}return null},t.prototype.getBounds=function(a,s,h){if(null==a)throw new Error("offset cannot be null.");if(null==s)throw new Error("size cannot be null.");for(var u=this.drawOrder,p=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,E=Number.NEGATIVE_INFINITY,M=0,b=u.length;M<b;M++){var R=u[M],I=0,S=null,P=R.getAttachment();if(P instanceof i.RegionAttachment)I=8,S=i.Utils.setArraySize(h,I,0),P.computeWorldVertices(R.bone,S,0,2);else if(P instanceof i.MeshAttachment){var C=P;I=C.worldVerticesLength,S=i.Utils.setArraySize(h,I,0),C.computeWorldVertices(R,0,I,S,0,2)}if(null!=S)for(var _=0,V=S.length;_<V;_+=2){var N=S[_],D=S[_+1];p=Math.min(p,N),m=Math.min(m,D),v=Math.max(v,N),E=Math.max(E,D)}}a.set(p,m),s.set(v-p,E-m)},t.prototype.update=function(i){this.time+=i},t}();i.Skeleton=a}(spine||(spine={})),function(i){var a=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new i.Pool((function(){return i.Utils.newFloatArray(16)}))}return t.prototype.update=function(a,s){if(null==a)throw new Error("skeleton cannot be null.");var h=this.boundingBoxes,u=this.polygons,p=this.polygonPool,m=a.slots,v=m.length;h.length=0,p.freeAll(u);for(var E=u.length=0;E<v;E++){var M=m[E],b=M.getAttachment();if(b instanceof i.BoundingBoxAttachment){var R=b;h.push(R);var I=p.obtain();I.length!=R.worldVerticesLength&&(I=i.Utils.newFloatArray(R.worldVerticesLength)),u.push(I),R.computeWorldVertices(M,0,R.worldVerticesLength,I,0,2)}}s?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,u=this.polygons,p=0,m=u.length;p<m;p++)for(var v=u[p],E=v,M=0,b=v.length;M<b;M+=2){var R=E[M],I=E[M+1];i=Math.min(i,R),a=Math.min(a,I),s=Math.max(s,R),h=Math.max(h,I)}this.minX=i,this.minY=a,this.maxX=s,this.maxY=h},t.prototype.aabbContainsPoint=function(i,a){return i>=this.minX&&i<=this.maxX&&a>=this.minY&&a<=this.maxY},t.prototype.aabbIntersectsSegment=function(i,a,s,h){var u=this.minX,p=this.minY,m=this.maxX,v=this.maxY;if(i<=u&&s<=u||a<=p&&h<=p||m<=i&&m<=s||v<=a&&v<=h)return!1;var E=(h-a)/(s-i),M=E*(u-i)+a;if(p<M&&M<v)return!0;if(p<(M=E*(m-i)+a)&&M<v)return!0;var b=(p-a)/E+i;return u<b&&b<m||u<(b=(v-a)/E+i)&&b<m},t.prototype.aabbIntersectsSkeleton=function(i){return this.minX<i.maxX&&this.maxX>i.minX&&this.minY<i.maxY&&this.maxY>i.minY},t.prototype.containsPoint=function(i,a){for(var s=this.polygons,h=0,u=s.length;h<u;h++)if(this.containsPointPolygon(s[h],i,a))return this.boundingBoxes[h];return null},t.prototype.containsPointPolygon=function(i,a,s){for(var h=i,u=i.length,p=u-2,m=!1,v=0;v<u;v+=2){var E=h[v+1],M=h[p+1];if(E<s&&s<=M||M<s&&s<=E){var b=h[v];b+(s-E)/(M-E)*(h[p]-b)<a&&(m=!m)}p=v}return m},t.prototype.intersectsSegment=function(i,a,s,h){for(var u=this.polygons,p=0,m=u.length;p<m;p++)if(this.intersectsSegmentPolygon(u[p],i,a,s,h))return this.boundingBoxes[p];return null},t.prototype.intersectsSegmentPolygon=function(i,a,s,h,u){for(var p=i,m=i.length,v=a-h,E=s-u,M=a*u-s*h,b=p[m-2],R=p[m-1],I=0;I<m;I+=2){var S=p[I],P=p[I+1],C=b*P-R*S,_=b-S,V=R-P,N=v*V-E*_,D=(M*_-v*C)/N;if((b<=D&&D<=S||S<=D&&D<=b)&&(a<=D&&D<=h||h<=D&&D<=a)){var L=(M*V-E*C)/N;if((R<=L&&L<=P||P<=L&&L<=R)&&(s<=L&&L<=u||u<=L&&L<=s))return!0}b=S,R=P}return!1},t.prototype.getPolygon=function(i){if(null==i)throw new Error("boundingBox cannot be null.");var a=this.boundingBoxes.indexOf(i);return-1==a?null:this.polygons[a]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}();i.SkeletonBounds=a}(spine||(spine={})),function(i){var a=function(){function l(){this.triangulator=new i.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return l.prototype.clipStart=function(a,s){if(null!=this.clipAttachment)return 0;var h=(this.clipAttachment=s).worldVerticesLength,u=i.Utils.setArraySize(this.clippingPolygon,h);s.computeWorldVertices(a,0,h,u,0,2);var p=this.clippingPolygon;l.makeClockwise(p);for(var m=this.clippingPolygons=this.triangulator.decompose(p,this.triangulator.triangulate(p)),v=0,E=m.length;v<E;v++){var M=m[v];l.makeClockwise(M),M.push(M[0]),M.push(M[1])}return m.length},l.prototype.clipEndWithSlot=function(i){null!=this.clipAttachment&&this.clipAttachment.endSlot==i.data&&this.clipEnd()},l.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return null!=this.clipAttachment},l.prototype.clipTriangles=function(a,s,h,u,p,m,v,E){var M=this.clipOutput,b=this.clippedVertices,R=this.clippedTriangles,I=this.clippingPolygons,S=this.clippingPolygons.length,P=E?12:8,C=0;b.length=0;t:for(var _=R.length=0;_<u;_+=3)for(var V=h[_]<<1,N=a[V],D=a[V+1],L=p[V],Y=p[V+1],U=a[V=h[_+1]<<1],X=a[V+1],F=p[V],B=p[V+1],W=a[V=h[_+2]<<1],q=a[V+1],j=p[V],G=p[V+1],z=0;z<S;z++){var H=b.length;if(!this.clip(N,D,U,X,W,q,I[z],M)){(it=i.Utils.setArraySize(b,H+3*P))[H]=N,it[H+1]=D,it[H+2]=m.r,it[H+3]=m.g,it[H+4]=m.b,it[H+5]=m.a,E?(it[H+6]=L,it[H+7]=Y,it[H+8]=v.r,it[H+9]=v.g,it[H+10]=v.b,it[H+11]=v.a,it[H+12]=U,it[H+13]=X,it[H+14]=m.r,it[H+15]=m.g,it[H+16]=m.b,it[H+17]=m.a,it[H+18]=F,it[H+19]=B,it[H+20]=v.r,it[H+21]=v.g,it[H+22]=v.b,it[H+23]=v.a,it[H+24]=W,it[H+25]=q,it[H+26]=m.r,it[H+27]=m.g,it[H+28]=m.b,it[H+29]=m.a,it[H+30]=j,it[H+31]=G,it[H+32]=v.r,it[H+33]=v.g,it[H+34]=v.b,it[H+35]=v.a):(it[H+6]=L,it[H+7]=Y,it[H+8]=U,it[H+9]=X,it[H+10]=m.r,it[H+11]=m.g,it[H+12]=m.b,it[H+13]=m.a,it[H+14]=F,it[H+15]=B,it[H+16]=W,it[H+17]=q,it[H+18]=m.r,it[H+19]=m.g,it[H+20]=m.b,it[H+21]=m.a,it[H+22]=j,it[H+23]=G),H=R.length,(ft=i.Utils.setArraySize(R,H+3))[H]=C,ft[H+1]=C+1,ft[H+2]=C+2,C+=3;continue t}var J=M.length;if(0!=J){for(var Q=X-q,K=W-U,$=N-W,tt=q-D,et=1/(Q*$+K*(D-q)),nt=J>>1,rt=this.clipOutput,it=i.Utils.setArraySize(b,H+nt*P),at=0;at<J;at+=2){var st=rt[at],ot=rt[at+1];it[H]=st,it[H+1]=ot,it[H+2]=m.r,it[H+3]=m.g,it[H+4]=m.b,it[H+5]=m.a;var ht=st-W,lt=ot-q,ut=(Q*ht+K*lt)*et,ct=(tt*ht+$*lt)*et,pt=1-ut-ct;it[H+6]=L*ut+F*ct+j*pt,it[H+7]=Y*ut+B*ct+G*pt,E&&(it[H+8]=v.r,it[H+9]=v.g,it[H+10]=v.b,it[H+11]=v.a),H+=P}H=R.length;var ft=i.Utils.setArraySize(R,H+3*(nt-2));for(nt--,at=1;at<nt;at++)ft[H]=C,ft[H+1]=C+at,ft[H+2]=C+at+1,H+=3;C+=nt+1}}},l.prototype.clip=function(i,a,s,h,u,p,m,v){var E=v,M=!1,b=null;2<=m.length%4?(b=v,v=this.scratch):b=this.scratch,b.length=0,b.push(i),b.push(a),b.push(s),b.push(h),b.push(u),b.push(p),b.push(i),b.push(a),v.length=0;for(var R=m,I=m.length-4,S=0;;S+=2){for(var P=R[S],C=R[S+1],_=R[S+2],V=R[S+3],N=P-_,D=C-V,L=b,Y=b.length-2,U=v.length,X=0;X<Y;X+=2){var F=L[X],B=L[X+1],W=L[X+2],q=L[X+3],j=0<N*(q-V)-D*(W-_);if(0<N*(B-V)-D*(F-_)){if(j){v.push(W),v.push(q);continue}var G=((H=W-F)*(C-B)-(z=q-B)*(P-F))/(z*(_-P)-H*(V-C));v.push(P+(_-P)*G),v.push(C+(V-C)*G)}else if(j){var z,H;G=((H=W-F)*(C-B)-(z=q-B)*(P-F))/(z*(_-P)-H*(V-C)),v.push(P+(_-P)*G),v.push(C+(V-C)*G),v.push(W),v.push(q)}M=!0}if(U==v.length)return!(E.length=0);if(v.push(v[0]),v.push(v[1]),S==I)break;var J=v;(v=b).length=0,b=J}if(E!=v){S=E.length=0;for(var Q=v.length-2;S<Q;S++)E[S]=v[S]}else E.length=E.length-2;return M},l.makeClockwise=function(i){for(var a=i,s=i.length,h=a[s-2]*a[1]-a[0]*a[s-1],u=0,p=0,m=0,v=0,E=s-3;v<E;v+=2)u=a[v],p=a[v+1],m=a[v+2],h+=u*a[v+3]-m*p;if(!(h<0)){v=0;var M=s-2;for(E=s>>1;v<E;v+=2){var b=a[v],R=a[v+1],I=M-v;a[v]=a[I],a[v+1]=a[I+1],a[I]=b,a[I+1]=R}}},l}();i.SkeletonClipping=a}(spine||(spine={})),function(i){var a=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(i){if(null==i)throw new Error("boneName cannot be null.");for(var a=this.bones,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findBoneIndex=function(i){if(null==i)throw new Error("boneName cannot be null.");for(var a=this.bones,s=0,h=a.length;s<h;s++)if(a[s].name==i)return s;return-1},t.prototype.findSlot=function(i){if(null==i)throw new Error("slotName cannot be null.");for(var a=this.slots,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findSlotIndex=function(i){if(null==i)throw new Error("slotName cannot be null.");for(var a=this.slots,s=0,h=a.length;s<h;s++)if(a[s].name==i)return s;return-1},t.prototype.findSkin=function(i){if(null==i)throw new Error("skinName cannot be null.");for(var a=this.skins,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findEvent=function(i){if(null==i)throw new Error("eventDataName cannot be null.");for(var a=this.events,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findAnimation=function(i){if(null==i)throw new Error("animationName cannot be null.");for(var a=this.animations,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findIkConstraint=function(i){if(null==i)throw new Error("constraintName cannot be null.");for(var a=this.ikConstraints,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findTransformConstraint=function(i){if(null==i)throw new Error("constraintName cannot be null.");for(var a=this.transformConstraints,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findPathConstraint=function(i){if(null==i)throw new Error("constraintName cannot be null.");for(var a=this.pathConstraints,s=0,h=a.length;s<h;s++){var u=a[s];if(u.name==i)return u}return null},t.prototype.findPathConstraintIndex=function(i){if(null==i)throw new Error("pathConstraintName cannot be null.");for(var a=this.pathConstraints,s=0,h=a.length;s<h;s++)if(a[s].name==i)return s;return-1},t}();i.SkeletonData=a}(spine||(spine={})),function(i){var a=function(){function k(i){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=i}return k.prototype.readSkeletonData=function(a){var s=this.scale,h=new i.SkeletonData,u="string"==typeof a?JSON.parse(a):a,p=u.skeleton;if(null!=p&&(h.hash=p.hash,h.version=p.spine,h.width=p.width,h.height=p.height,h.fps=p.fps,h.imagesPath=p.images),u.bones)for(var m=0;m<u.bones.length;m++){var v=u.bones[m],E=null,M=this.getValue(v,"parent",null);if(null!=M&&null==(E=h.findBone(M)))throw new Error("Parent bone not found: "+M);(S=new i.BoneData(h.bones.length,v.name,E)).length=this.getValue(v,"length",0)*s,S.x=this.getValue(v,"x",0)*s,S.y=this.getValue(v,"y",0)*s,S.rotation=this.getValue(v,"rotation",0),S.scaleX=this.getValue(v,"scaleX",1),S.scaleY=this.getValue(v,"scaleY",1),S.shearX=this.getValue(v,"shearX",0),S.shearY=this.getValue(v,"shearY",0),S.transformMode=k.transformModeFromString(this.getValue(v,"transform","normal")),h.bones.push(S)}if(u.slots)for(m=0;m<u.slots.length;m++){var b=(F=u.slots[m]).name,R=F.bone,I=h.findBone(R);if(null==I)throw new Error("Slot bone not found: "+R);var S=new i.SlotData(h.slots.length,b,I),P=this.getValue(F,"color",null);null!=P&&S.color.setFromString(P);var C=this.getValue(F,"dark",null);null!=C&&(S.darkColor=new i.Color(1,1,1,1),S.darkColor.setFromString(C)),S.attachmentName=this.getValue(F,"attachment",null),S.blendMode=k.blendModeFromString(this.getValue(F,"blend","normal")),h.slots.push(S)}if(u.ik)for(m=0;m<u.ik.length;m++){var _=u.ik[m];(S=new i.IkConstraintData(_.name)).order=this.getValue(_,"order",0);for(var V=0;V<_.bones.length;V++){if(R=_.bones[V],null==(D=h.findBone(R)))throw new Error("IK bone not found: "+R);S.bones.push(D)}var N=_.target;if(S.target=h.findBone(N),null==S.target)throw new Error("IK target bone not found: "+N);S.bendDirection=this.getValue(_,"bendPositive",!0)?1:-1,S.mix=this.getValue(_,"mix",1),h.ikConstraints.push(S)}if(u.transform)for(m=0;m<u.transform.length;m++){for(_=u.transform[m],(S=new i.TransformConstraintData(_.name)).order=this.getValue(_,"order",0),V=0;V<_.bones.length;V++){if(R=_.bones[V],null==(D=h.findBone(R)))throw new Error("Transform constraint bone not found: "+R);S.bones.push(D)}if(N=_.target,S.target=h.findBone(N),null==S.target)throw new Error("Transform constraint target bone not found: "+N);S.local=this.getValue(_,"local",!1),S.relative=this.getValue(_,"relative",!1),S.offsetRotation=this.getValue(_,"rotation",0),S.offsetX=this.getValue(_,"x",0)*s,S.offsetY=this.getValue(_,"y",0)*s,S.offsetScaleX=this.getValue(_,"scaleX",0),S.offsetScaleY=this.getValue(_,"scaleY",0),S.offsetShearY=this.getValue(_,"shearY",0),S.rotateMix=this.getValue(_,"rotateMix",1),S.translateMix=this.getValue(_,"translateMix",1),S.scaleMix=this.getValue(_,"scaleMix",1),S.shearMix=this.getValue(_,"shearMix",1),h.transformConstraints.push(S)}if(u.path)for(m=0;m<u.path.length;m++){for(_=u.path[m],(S=new i.PathConstraintData(_.name)).order=this.getValue(_,"order",0),V=0;V<_.bones.length;V++){var D;if(R=_.bones[V],null==(D=h.findBone(R)))throw new Error("Transform constraint bone not found: "+R);S.bones.push(D)}if(N=_.target,S.target=h.findSlot(N),null==S.target)throw new Error("Path target slot not found: "+N);S.positionMode=k.positionModeFromString(this.getValue(_,"positionMode","percent")),S.spacingMode=k.spacingModeFromString(this.getValue(_,"spacingMode","length")),S.rotateMode=k.rotateModeFromString(this.getValue(_,"rotateMode","tangent")),S.offsetRotation=this.getValue(_,"rotation",0),S.position=this.getValue(_,"position",0),S.positionMode==i.PositionMode.Fixed&&(S.position*=s),S.spacing=this.getValue(_,"spacing",0),S.spacingMode!=i.SpacingMode.Length&&S.spacingMode!=i.SpacingMode.Fixed||(S.spacing*=s),S.rotateMix=this.getValue(_,"rotateMix",1),S.translateMix=this.getValue(_,"translateMix",1),h.pathConstraints.push(S)}if(u.skins)for(var L in u.skins){var Y=u.skins[L],U=new i.Skin(L);for(var b in Y){var X=h.findSlotIndex(b);if(-1==X)throw new Error("Slot not found: "+b);var F=Y[b];for(var B in F){var W=this.readAttachment(F[B],U,X,B,h);null!=W&&U.addAttachment(X,B,W)}}h.skins.push(U),"default"==U.name&&(h.defaultSkin=U)}m=0;for(var q=this.linkedMeshes.length;m<q;m++){var j=this.linkedMeshes[m];if(null==(U=null==j.skin?h.defaultSkin:h.findSkin(j.skin)))throw new Error("Skin not found: "+j.skin);var G=U.getAttachment(j.slotIndex,j.parent);if(null==G)throw new Error("Parent mesh not found: "+j.parent);j.mesh.setParentMesh(G),j.mesh.updateUVs()}if(this.linkedMeshes.length=0,u.events)for(var z in u.events){var H=u.events[z];(S=new i.EventData(z)).intValue=this.getValue(H,"int",0),S.floatValue=this.getValue(H,"float",0),S.stringValue=this.getValue(H,"string",""),h.events.push(S)}if(u.animations)for(var J in u.animations){var Q=u.animations[J];this.readAnimation(Q,J,h)}return h},k.prototype.readAttachment=function(a,s,h,u,p){var m=this.scale;switch(u=this.getValue(a,"name",u),this.getValue(a,"type","region")){case"region":var v=this.getValue(a,"path",u),E=this.attachmentLoader.newRegionAttachment(s,u,v);return null==E?null:(E.path=v,E.x=this.getValue(a,"x",0)*m,E.y=this.getValue(a,"y",0)*m,E.scaleX=this.getValue(a,"scaleX",1),E.scaleY=this.getValue(a,"scaleY",1),E.rotation=this.getValue(a,"rotation",0),E.width=a.width*m,E.height=a.height*m,null!=(N=this.getValue(a,"color",null))&&E.color.setFromString(N),E.updateOffset(),E);case"boundingbox":var M=this.attachmentLoader.newBoundingBoxAttachment(s,u);return null==M?null:(this.readVertices(a,M,a.vertexCount<<1),null!=(N=this.getValue(a,"color",null))&&M.color.setFromString(N),M);case"mesh":case"linkedmesh":v=this.getValue(a,"path",u);var b=this.attachmentLoader.newMeshAttachment(s,u,v);if(null==b)return null;b.path=v,null!=(N=this.getValue(a,"color",null))&&b.color.setFromString(N);var R=this.getValue(a,"parent",null);if(null!=R)return b.inheritDeform=this.getValue(a,"deform",!0),this.linkedMeshes.push(new w(b,this.getValue(a,"skin",null),h,R)),b;var I=a.uvs;return this.readVertices(a,b,I.length),b.triangles=a.triangles,b.regionUVs=I,b.updateUVs(),b.hullLength=2*this.getValue(a,"hull",0),b;case"path":if(null==(v=this.attachmentLoader.newPathAttachment(s,u)))return null;v.closed=this.getValue(a,"closed",!1),v.constantSpeed=this.getValue(a,"constantSpeed",!0);var S=a.vertexCount;this.readVertices(a,v,S<<1);for(var P=i.Utils.newArray(S/3,0),C=0;C<a.lengths.length;C++)P[C]=a.lengths[C]*m;return v.lengths=P,null!=(N=this.getValue(a,"color",null))&&v.color.setFromString(N),v;case"point":var _=this.attachmentLoader.newPointAttachment(s,u);return null==_?null:(_.x=this.getValue(a,"x",0)*m,_.y=this.getValue(a,"y",0)*m,_.rotation=this.getValue(a,"rotation",0),null!=(N=this.getValue(a,"color",null))&&_.color.setFromString(N),_);case"clipping":var V=this.attachmentLoader.newClippingAttachment(s,u);if(null==V)return null;var N,D=this.getValue(a,"end",null);if(null!=D){var L=p.findSlot(D);if(null==L)throw new Error("Clipping end slot not found: "+D);V.endSlot=L}return S=a.vertexCount,this.readVertices(a,V,S<<1),null!=(N=this.getValue(a,"color",null))&&V.color.setFromString(N),V}return null},k.prototype.readVertices=function(a,s,h){var u=this.scale;s.worldVerticesLength=h;var p=a.vertices;if(h!=p.length){var m=new Array,v=new Array;for(R=0,I=p.length;R<I;){var E=p[R++];v.push(E);for(var M=R+4*E;R<M;R+=4)v.push(p[R]),m.push(p[R+1]*u),m.push(p[R+2]*u),m.push(p[R+3])}s.bones=v,s.vertices=i.Utils.toFloatArray(m)}else{var b=i.Utils.toFloatArray(p);if(1!=u)for(var R=0,I=p.length;R<I;R++)b[R]*=u;s.vertices=b}},k.prototype.readAnimation=function(a,s,h){var u=this.scale,p=new Array,m=0;if(a.slots)for(var v in a.slots){var E=a.slots[v];if(-1==(ft=h.findSlotIndex(v)))throw new Error("Slot not found: "+v);for(var M in E){var b=E[M];if("attachment"==M){(L=new i.AttachmentTimeline(b.length)).slotIndex=ft;for(var R=0,I=0;I<b.length;I++){var S=b[I];L.setFrame(R++,S.time,S.name)}p.push(L),m=Math.max(m,L.frames[L.getFrameCount()-1])}else if("color"==M){for((L=new i.ColorTimeline(b.length)).slotIndex=ft,R=0,I=0;I<b.length;I++){S=b[I];var P=new i.Color;P.setFromString(S.color),L.setFrame(R,S.time,P.r,P.g,P.b,P.a),this.readCurve(S,L,R),R++}p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.ColorTimeline.ENTRIES])}else{if("twoColor"!=M)throw new Error("Invalid timeline type for a slot: "+M+" ("+v+")");for((L=new i.TwoColorTimeline(b.length)).slotIndex=ft,R=0,I=0;I<b.length;I++){S=b[I];var C=new i.Color,_=new i.Color;C.setFromString(S.light),_.setFromString(S.dark),L.setFrame(R,S.time,C.r,C.g,C.b,C.a,_.r,_.g,_.b),this.readCurve(S,L,R),R++}p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.TwoColorTimeline.ENTRIES])}}}if(a.bones)for(var V in a.bones){var N=a.bones[V],D=h.findBoneIndex(V);if(-1==D)throw new Error("Bone not found: "+V);for(var M in N)if(b=N[M],"rotate"===M){for((L=new i.RotateTimeline(b.length)).boneIndex=D,R=0,I=0;I<b.length;I++)S=b[I],L.setFrame(R,S.time,S.angle),this.readCurve(S,L,R),R++;p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.RotateTimeline.ENTRIES])}else{if("translate"!==M&&"scale"!==M&&"shear"!==M)throw new Error("Invalid timeline type for a bone: "+M+" ("+V+")");var L=null,Y=1;for("scale"===M?L=new i.ScaleTimeline(b.length):"shear"===M?L=new i.ShearTimeline(b.length):(L=new i.TranslateTimeline(b.length),Y=u),L.boneIndex=D,R=0,I=0;I<b.length;I++){S=b[I];var U=this.getValue(S,"x",0),X=this.getValue(S,"y",0);L.setFrame(R,S.time,U*Y,X*Y),this.readCurve(S,L,R),R++}p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.TranslateTimeline.ENTRIES])}}if(a.ik)for(var F in a.ik){var B=a.ik[F],W=h.findIkConstraint(F);for((L=new i.IkConstraintTimeline(B.length)).ikConstraintIndex=h.ikConstraints.indexOf(W),R=0,I=0;I<B.length;I++)S=B[I],L.setFrame(R,S.time,this.getValue(S,"mix",1),this.getValue(S,"bendPositive",!0)?1:-1),this.readCurve(S,L,R),R++;p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.IkConstraintTimeline.ENTRIES])}if(a.transform)for(var F in a.transform){for(B=a.transform[F],W=h.findTransformConstraint(F),(L=new i.TransformConstraintTimeline(B.length)).transformConstraintIndex=h.transformConstraints.indexOf(W),R=0,I=0;I<B.length;I++)S=B[I],L.setFrame(R,S.time,this.getValue(S,"rotateMix",1),this.getValue(S,"translateMix",1),this.getValue(S,"scaleMix",1),this.getValue(S,"shearMix",1)),this.readCurve(S,L,R),R++;p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.TransformConstraintTimeline.ENTRIES])}if(a.paths)for(var F in a.paths){B=a.paths[F];var q=h.findPathConstraintIndex(F);if(-1==q)throw new Error("Path constraint not found: "+F);var j=h.pathConstraints[q];for(var M in B)if(b=B[M],"position"===M||"spacing"===M){for(L=null,Y=1,"spacing"===M?(L=new i.PathConstraintSpacingTimeline(b.length),j.spacingMode!=i.SpacingMode.Length&&j.spacingMode!=i.SpacingMode.Fixed||(Y=u)):(L=new i.PathConstraintPositionTimeline(b.length),j.positionMode==i.PositionMode.Fixed&&(Y=u)),L.pathConstraintIndex=q,R=0,I=0;I<b.length;I++)S=b[I],L.setFrame(R,S.time,this.getValue(S,M,0)*Y),this.readCurve(S,L,R),R++;p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===M){for((L=new i.PathConstraintMixTimeline(b.length)).pathConstraintIndex=q,R=0,I=0;I<b.length;I++)S=b[I],L.setFrame(R,S.time,this.getValue(S,"rotateMix",1),this.getValue(S,"translateMix",1)),this.readCurve(S,L,R),R++;p.push(L),m=Math.max(m,L.frames[(L.getFrameCount()-1)*i.PathConstraintMixTimeline.ENTRIES])}}if(a.deform)for(var G in a.deform){var z=a.deform[G],H=h.findSkin(G);if(null==H)throw new Error("Skin not found: "+G);for(var v in z){if(E=z[v],-1==(ft=h.findSlotIndex(v)))throw new Error("Slot not found: "+E.name);for(var M in E){b=E[M];var J=H.getAttachment(ft,M);if(null==J)throw new Error("Deform attachment not found: "+b.name);var Q=null!=J.bones,K=J.vertices,$=Q?K.length/3*2:K.length;(L=new i.DeformTimeline(b.length)).slotIndex=ft,L.attachment=J,R=0;for(var tt=0;tt<b.length;tt++){S=b[tt];var et=void 0,nt=this.getValue(S,"vertices",null);if(null==nt)et=Q?i.Utils.newFloatArray($):K;else{et=i.Utils.newFloatArray($);var rt=this.getValue(S,"offset",0);if(i.Utils.arrayCopy(nt,0,et,rt,nt.length),1!=u)for(var it=(I=rt)+nt.length;I<it;I++)et[I]*=u;if(!Q)for(I=0;I<$;I++)et[I]+=K[I]}L.setFrame(R,S.time,et),this.readCurve(S,L,R),R++}p.push(L),m=Math.max(m,L.frames[L.getFrameCount()-1])}}}var at=a.drawOrder;if(null==at&&(at=a.draworder),null!=at){L=new i.DrawOrderTimeline(at.length);var st=h.slots.length;for(R=0,tt=0;tt<at.length;tt++){var ot=at[tt],ht=null,lt=this.getValue(ot,"offsets",null);if(null!=lt){ht=i.Utils.newArray(st,-1);var ut=i.Utils.newArray(st-lt.length,0),ct=0,pt=0;for(I=0;I<lt.length;I++){var ft,dt=lt[I];if(-1==(ft=h.findSlotIndex(dt.slot)))throw new Error("Slot not found: "+dt.slot);for(;ct!=ft;)ut[pt++]=ct++;ht[ct+dt.offset]=ct++}for(;ct<st;)ut[pt++]=ct++;for(I=st-1;0<=I;I--)-1==ht[I]&&(ht[I]=ut[--pt])}L.setFrame(R++,ot.time,ht)}p.push(L),m=Math.max(m,L.frames[L.getFrameCount()-1])}if(a.events){for(L=new i.EventTimeline(a.events.length),R=0,I=0;I<a.events.length;I++){var mt=a.events[I],gt=h.findEvent(mt.name);if(null==gt)throw new Error("Event not found: "+mt.name);var vt=new i.Event(i.Utils.toSinglePrecision(mt.time),gt);vt.intValue=this.getValue(mt,"int",gt.intValue),vt.floatValue=this.getValue(mt,"float",gt.floatValue),vt.stringValue=this.getValue(mt,"string",gt.stringValue),L.setFrame(R++,vt)}p.push(L),m=Math.max(m,L.frames[L.getFrameCount()-1])}if(isNaN(m))throw new Error("Error while parsing animation, duration is NaN");h.animations.push(new i.Animation(s,p,m))},k.prototype.readCurve=function(i,a,s){if(i.curve)if("stepped"===i.curve)a.setStepped(s);else if("[object Array]"===Object.prototype.toString.call(i.curve)){var h=i.curve;a.setCurve(s,h[0],h[1],h[2],h[3])}},k.prototype.getValue=function(i,a,s){return void 0!==i[a]?i[a]:s},k.blendModeFromString=function(a){if("normal"==(a=a.toLowerCase()))return i.BlendMode.Normal;if("additive"==a)return i.BlendMode.Additive;if("multiply"==a)return i.BlendMode.Multiply;if("screen"==a)return i.BlendMode.Screen;throw new Error("Unknown blend mode: "+a)},k.positionModeFromString=function(a){if("fixed"==(a=a.toLowerCase()))return i.PositionMode.Fixed;if("percent"==a)return i.PositionMode.Percent;throw new Error("Unknown position mode: "+a)},k.spacingModeFromString=function(a){if("length"==(a=a.toLowerCase()))return i.SpacingMode.Length;if("fixed"==a)return i.SpacingMode.Fixed;if("percent"==a)return i.SpacingMode.Percent;throw new Error("Unknown position mode: "+a)},k.rotateModeFromString=function(a){if("tangent"==(a=a.toLowerCase()))return i.RotateMode.Tangent;if("chain"==a)return i.RotateMode.Chain;if("chainscale"==a)return i.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+a)},k.transformModeFromString=function(a){if("normal"==(a=a.toLowerCase()))return i.TransformMode.Normal;if("onlytranslation"==a)return i.TransformMode.OnlyTranslation;if("norotationorreflection"==a)return i.TransformMode.NoRotationOrReflection;if("noscale"==a)return i.TransformMode.NoScale;if("noscaleorreflection"==a)return i.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+a)},k}();i.SkeletonJson=a;var w=function(i,a,s,h){this.mesh=i,this.skin=a,this.slotIndex=s,this.parent=h}}(spine||(spine={})),function(i){var a=function(){function t(i){if(this.attachments=new Array,null==i)throw new Error("name cannot be null.");this.name=i}return t.prototype.addAttachment=function(i,a,s){if(null==s)throw new Error("attachment cannot be null.");var h=this.attachments;i>=h.length&&(h.length=i+1),h[i]||(h[i]={}),h[i][a]=s},t.prototype.getAttachment=function(i,a){var s=this.attachments[i];return s?s[a]:null},t.prototype.attachAll=function(i,a){for(var s=0,h=0;h<i.slots.length;h++){var u=i.slots[h],p=u.getAttachment();if(p&&s<a.attachments.length){var m=a.attachments[s];for(var v in m)if(p==m[v]){var E=this.getAttachment(s,v);null!=E&&u.setAttachment(E);break}}s++}},t}();i.Skin=a}(spine||(spine={})),function(i){var a=function(){function t(a,s){if(this.attachmentVertices=new Array,null==a)throw new Error("data cannot be null.");if(null==s)throw new Error("bone cannot be null.");this.data=a,this.bone=s,this.color=new i.Color,this.darkColor=null==a.darkColor?null:new i.Color,this.setToSetupPose()}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(i){this.attachment!=i&&(this.attachment=i,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(i){this.attachmentTime=this.bone.skeleton.time-i},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}();i.Slot=a}(spine||(spine={})),function(i){i.SlotData=function(a,s,h){if(this.color=new i.Color(1,1,1,1),a<0)throw new Error("index must be >= 0.");if(null==s)throw new Error("name cannot be null.");if(null==h)throw new Error("boneData cannot be null.");this.index=a,this.name=s,this.boneData=h}}(spine||(spine={})),function(i){var a,s,h,u,p=function(){function t(i){this._image=i}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(i){switch(i.toLowerCase()){case"nearest":return a.Nearest;case"linear":return a.Linear;case"mipmap":return a.MipMap;case"mipmapnearestnearest":return a.MipMapNearestNearest;case"mipmaplinearnearest":return a.MipMapLinearNearest;case"mipmapnearestlinear":return a.MipMapNearestLinear;case"mipmaplinearlinear":return a.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+i)}},t.wrapFromString=function(i){switch(i.toLowerCase()){case"mirroredtepeat":return h.MirroredRepeat;case"clamptoedge":return h.ClampToEdge;case"repeat":return h.Repeat;default:throw new Error("Unknown texture wrap "+i)}},t}();i.Texture=p,(s=a=i.TextureFilter||(i.TextureFilter={}))[s.Nearest=9728]="Nearest",s[s.Linear=9729]="Linear",s[s.MipMap=9987]="MipMap",s[s.MipMapNearestNearest=9984]="MipMapNearestNearest",s[s.MipMapLinearNearest=9985]="MipMapLinearNearest",s[s.MipMapNearestLinear=9986]="MipMapNearestLinear",s[s.MipMapLinearLinear=9987]="MipMapLinearLinear",(u=h=i.TextureWrap||(i.TextureWrap={}))[u.MirroredRepeat=33648]="MirroredRepeat",u[u.ClampToEdge=33071]="ClampToEdge",u[u.Repeat=10497]="Repeat";i.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};var m=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return __extends(e,i),e.prototype.setFilters=function(i,a){},e.prototype.setWraps=function(i,a){},e.prototype.dispose=function(){},e}(i.Texture);i.FakeTexture=m}(spine||(spine={})),function(i){var a=function(){function t(i,a){this.pages=new Array,this.regions=new Array,this.load(i,a)}return t.prototype.load=function(a,u){if(null==u)throw new Error("textureLoader cannot be null.");for(var p=new s(a),m=new Array(4),v=null;;){var E=p.readLine();if(null==E)break;if(0==(E=E.trim()).length)v=null;else if(v){var M=new h;M.name=E,M.page=v,M.rotate="true"==p.readValue(),p.readTuple(m);var b=parseInt(m[0]),R=parseInt(m[1]);p.readTuple(m);var I=parseInt(m[0]),S=parseInt(m[1]);M.u=b/v.width,M.v=R/v.height,M.rotate?(M.u2=(b+S)/v.width,M.v2=(R+I)/v.height):(M.u2=(b+I)/v.width,M.v2=(R+S)/v.height),M.x=b,M.y=R,M.width=Math.abs(I),M.height=Math.abs(S),4==p.readTuple(m)&&4==p.readTuple(m)&&p.readTuple(m),M.originalWidth=parseInt(m[0]),M.originalHeight=parseInt(m[1]),p.readTuple(m),M.offsetX=parseInt(m[0]),M.offsetY=parseInt(m[1]),M.index=parseInt(p.readValue()),M.texture=v.texture,this.regions.push(M)}else{(v=new d).name=E,2==p.readTuple(m)&&(v.width=parseInt(m[0]),v.height=parseInt(m[1]),p.readTuple(m)),p.readTuple(m),v.minFilter=i.Texture.filterFromString(m[0]),v.magFilter=i.Texture.filterFromString(m[1]);var P=p.readValue();v.uWrap=i.TextureWrap.ClampToEdge,v.vWrap=i.TextureWrap.ClampToEdge,"x"==P?v.uWrap=i.TextureWrap.Repeat:"y"==P?v.vWrap=i.TextureWrap.Repeat:"xy"==P&&(v.uWrap=v.vWrap=i.TextureWrap.Repeat),v.texture=u(E),v.texture.setFilters(v.minFilter,v.magFilter),v.texture.setWraps(v.uWrap,v.vWrap),v.width=v.texture.getImage().width,v.height=v.texture.getImage().height,this.pages.push(v)}}},t.prototype.findRegion=function(i){for(var a=0;a<this.regions.length;a++)if(this.regions[a].name==i)return this.regions[a];return null},t.prototype.dispose=function(){for(var i=0;i<this.pages.length;i++)this.pages[i].texture.dispose()},t}();i.TextureAtlas=a;var s=function(){function t(i){this.index=0,this.lines=i.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var i=this.readLine(),a=i.indexOf(":");if(-1==a)throw new Error("Invalid line: "+i);return i.substring(a+1).trim()},t.prototype.readTuple=function(i){var a=this.readLine(),s=a.indexOf(":");if(-1==s)throw new Error("Invalid line: "+a);for(var h=0,u=s+1;h<3;h++){var p=a.indexOf(",",u);if(-1==p)break;i[h]=a.substr(u,p-u).trim(),u=p+1}return i[h]=a.substring(u).trim(),h+1},t}(),d=function(){};i.TextureAtlasPage=d;var h=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return __extends(e,i),e}(i.TextureRegion);i.TextureAtlasRegion=h}(spine||(spine={})),function(i){var a=function(){function t(a,s){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new i.Vector2,null==a)throw new Error("data cannot be null.");if(null==s)throw new Error("skeleton cannot be null.");this.data=a,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix,this.scaleMix=a.scaleMix,this.shearMix=a.shearMix,this.bones=new Array;for(var h=0;h<a.bones.length;h++)this.bones.push(s.findBone(a.bones[h].name));this.target=s.findBone(a.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var a=this.rotateMix,s=this.translateMix,h=this.scaleMix,u=this.shearMix,p=this.target,m=p.a,v=p.b,E=p.c,M=p.d,b=0<m*M-v*E?i.MathUtils.degRad:-i.MathUtils.degRad,R=this.data.offsetRotation*b,I=this.data.offsetShearY*b,S=this.bones,P=0,C=S.length;P<C;P++){var _=S[P],V=!1;if(0!=a){var N=_.a,D=_.b,L=_.c,Y=_.d;(q=Math.atan2(E,m)-Math.atan2(L,N)+R)>i.MathUtils.PI?q-=i.MathUtils.PI2:q<-i.MathUtils.PI&&(q+=i.MathUtils.PI2),q*=a;var U=Math.cos(q),X=Math.sin(q);_.a=U*N-X*L,_.b=U*D-X*Y,_.c=X*N+U*L,_.d=X*D+U*Y,V=!0}if(0!=s){var F=this.temp;p.localToWorld(F.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(F.x-_.worldX)*s,_.worldY+=(F.y-_.worldY)*s,V=!0}if(0<h){var B=Math.sqrt(_.a*_.a+_.c*_.c),W=Math.sqrt(m*m+E*E);1e-5<B&&(B=(B+(W-B+this.data.offsetScaleX)*h)/B),_.a*=B,_.c*=B,B=Math.sqrt(_.b*_.b+_.d*_.d),W=Math.sqrt(v*v+M*M),1e-5<B&&(B=(B+(W-B+this.data.offsetScaleY)*h)/B),_.b*=B,_.d*=B,V=!0}if(0<u){D=_.b,Y=_.d;var q,j=Math.atan2(Y,D);(q=Math.atan2(M,v)-Math.atan2(E,m)-(j-Math.atan2(_.c,_.a)))>i.MathUtils.PI?q-=i.MathUtils.PI2:q<-i.MathUtils.PI&&(q+=i.MathUtils.PI2),q=j+(q+I)*u,B=Math.sqrt(D*D+Y*Y),_.b=Math.cos(q)*B,_.d=Math.sin(q)*B,V=!0}V&&(_.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var a=this.rotateMix,s=this.translateMix,h=this.scaleMix,u=this.shearMix,p=this.target,m=p.a,v=p.b,E=p.c,M=p.d,b=0<m*M-v*E?i.MathUtils.degRad:-i.MathUtils.degRad,R=this.data.offsetRotation*b,I=this.data.offsetShearY*b,S=this.bones,P=0,C=S.length;P<C;P++){var _,V=S[P],N=!1;if(0!=a){var D=V.a,L=V.b,Y=V.c,U=V.d;(_=Math.atan2(E,m)+R)>i.MathUtils.PI?_-=i.MathUtils.PI2:_<-i.MathUtils.PI&&(_+=i.MathUtils.PI2),_*=a;var X=Math.cos(_),F=Math.sin(_);V.a=X*D-F*Y,V.b=X*L-F*U,V.c=F*D+X*Y,V.d=F*L+X*U,N=!0}if(0!=s){var B=this.temp;p.localToWorld(B.set(this.data.offsetX,this.data.offsetY)),V.worldX+=B.x*s,V.worldY+=B.y*s,N=!0}if(0<h){var W=(Math.sqrt(m*m+E*E)-1+this.data.offsetScaleX)*h+1;V.a*=W,V.c*=W,W=(Math.sqrt(v*v+M*M)-1+this.data.offsetScaleY)*h+1,V.b*=W,V.d*=W,N=!0}if(0<u)(_=Math.atan2(M,v)-Math.atan2(E,m))>i.MathUtils.PI?_-=i.MathUtils.PI2:_<-i.MathUtils.PI&&(_+=i.MathUtils.PI2),L=V.b,U=V.d,_=Math.atan2(U,L)+(_-i.MathUtils.PI/2+I)*u,W=Math.sqrt(L*L+U*U),V.b=Math.cos(_)*W,V.d=Math.sin(_)*W,N=!0;N&&(V.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var i=this.rotateMix,a=this.translateMix,s=this.scaleMix,h=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var p=this.bones,m=0,v=p.length;m<v;m++){var E=p[m];E.appliedValid||E.updateAppliedTransform();var M=E.arotation;if(0!=i){var b=u.arotation-M+this.data.offsetRotation;M+=(b-=360*(16384-(16384.499999999996-b/360|0)))*i}var R=E.ax,I=E.ay;0!=a&&(R+=(u.ax-R+this.data.offsetX)*a,I+=(u.ay-I+this.data.offsetY)*a);var S=E.ascaleX,P=E.ascaleY;0<s&&(1e-5<S&&(S=(S+(u.ascaleX-S+this.data.offsetScaleX)*s)/S),1e-5<P&&(P=(P+(u.ascaleY-P+this.data.offsetScaleY)*s)/P));var C=E.ashearY;0<h&&(b=u.ashearY-C+this.data.offsetShearY,b-=360*(16384-(16384.499999999996-b/360|0)),E.shearY+=b*h),E.updateWorldTransformWith(R,I,M,S,P,E.ashearX,C)}},t.prototype.applyRelativeLocal=function(){var i=this.rotateMix,a=this.translateMix,s=this.scaleMix,h=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var p=this.bones,m=0,v=p.length;m<v;m++){var E=p[m];E.appliedValid||E.updateAppliedTransform();var M=E.arotation;0!=i&&(M+=(u.arotation+this.data.offsetRotation)*i);var b=E.ax,R=E.ay;0!=a&&(b+=(u.ax+this.data.offsetX)*a,R+=(u.ay+this.data.offsetY)*a);var I=E.ascaleX,S=E.ascaleY;0<s&&(1e-5<I&&(I*=(u.ascaleX-1+this.data.offsetScaleX)*s+1),1e-5<S&&(S*=(u.ascaleY-1+this.data.offsetScaleY)*s+1));var P=E.ashearY;0<h&&(P+=(u.ashearY+this.data.offsetShearY)*h),E.updateWorldTransformWith(b,R,M,I,S,E.ashearX,P)}},t.prototype.getOrder=function(){return this.data.order},t}();i.TransformConstraint=a}(spine||(spine={})),(spine||(spine={})).TransformConstraintData=function(i){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==i)throw new Error("name cannot be null.");this.name=i},function(i){var a=function(){function O(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new i.Pool((function(){return new Array})),this.polygonIndicesPool=new i.Pool((function(){return new Array}))}return O.prototype.triangulate=function(i){for(var a=i,s=i.length>>1,h=this.indicesArray,u=h.length=0;u<s;u++)h[u]=u;for(var p=this.isConcaveArray,m=(u=p.length=0,s);u<m;++u)p[u]=O.isConcave(u,s,a,h);var v=this.triangles;for(v.length=0;3<s;){for(var E=s-1,M=(u=0,1);;){t:if(!p[u]){for(var b=h[E]<<1,R=h[u]<<1,I=h[M]<<1,S=a[b],P=a[b+1],C=a[R],_=a[R+1],V=a[I],N=a[I+1],D=(M+1)%s;D!=E;D=(D+1)%s)if(p[D]){var L=h[D]<<1,Y=a[L],U=a[L+1];if(O.positiveArea(V,N,S,P,Y,U)&&O.positiveArea(S,P,C,_,Y,U)&&O.positiveArea(C,_,V,N,Y,U))break t}break}if(0==M){do{if(!p[u])break;u--}while(0<u);break}E=u,M=((u=M)+1)%s}v.push(h[(s+u-1)%s]),v.push(h[u]),v.push(h[(u+1)%s]),h.splice(u,1),p.splice(u,1);var X=(--s+u-1)%s,F=u==s?0:u;p[X]=O.isConcave(X,s,a,h),p[F]=O.isConcave(F,s,a,h)}return 3==s&&(v.push(h[2]),v.push(h[0]),v.push(h[1])),v},O.prototype.decompose=function(i,a){var s=i,h=this.convexPolygons;this.polygonPool.freeAll(h),h.length=0;var u=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(u),u.length=0;var p=this.polygonIndicesPool.obtain();p.length=0;for(var m=this.polygonPool.obtain(),v=-1,E=m.length=0,M=0,b=a.length;M<b;M+=3){var R=a[M]<<1,I=a[M+1]<<1,S=a[M+2]<<1,P=s[R],C=s[R+1],_=s[I],V=s[I+1],N=s[S],D=s[S+1],L=!1;if(v==R){var Y=m.length-4,U=O.winding(m[Y],m[Y+1],m[Y+2],m[Y+3],N,D),X=O.winding(N,D,m[0],m[1],m[2],m[3]);U==E&&X==E&&(m.push(N),m.push(D),p.push(S),L=!0)}L||(0<m.length?(h.push(m),u.push(p)):(this.polygonPool.free(m),this.polygonIndicesPool.free(p)),(m=this.polygonPool.obtain()).length=0,m.push(P),m.push(C),m.push(_),m.push(V),m.push(N),m.push(D),(p=this.polygonIndicesPool.obtain()).length=0,p.push(R),p.push(I),p.push(S),E=O.winding(P,C,_,V,N,D),v=R)}for(0<m.length&&(h.push(m),u.push(p)),M=0,b=h.length;M<b;M++)if(0!=(p=u[M]).length)for(var F=p[0],B=p[p.length-1],W=(m=h[M])[Y=m.length-4],q=m[Y+1],j=m[Y+2],G=m[Y+3],z=m[0],H=m[1],J=m[2],Q=m[3],K=O.winding(W,q,j,G,z,H),$=0;$<b;$++)if($!=M){var tt=u[$];if(3==tt.length){var et=tt[0],nt=tt[1],rt=tt[2],it=h[$];N=it[it.length-2],D=it[it.length-1],et==F&&nt==B&&(U=O.winding(W,q,j,G,N,D),X=O.winding(N,D,z,H,J,Q),U==K&&X==K&&(it.length=0,tt.length=0,m.push(N),m.push(D),p.push(rt),W=j,q=G,j=N,G=D,$=0))}}for(M=h.length-1;0<=M;M--)0==(m=h[M]).length&&(h.splice(M,1),this.polygonPool.free(m),p=u[M],u.splice(M,1),this.polygonIndicesPool.free(p));return h},O.isConcave=function(i,a,s,h){var u=h[(a+i-1)%a]<<1,p=h[i]<<1,m=h[(i+1)%a]<<1;return!this.positiveArea(s[u],s[u+1],s[p],s[p+1],s[m],s[m+1])},O.positiveArea=function(i,a,s,h,u,p){return 0<=i*(p-h)+s*(a-p)+u*(h-a)},O.winding=function(i,a,s,h,u,p){var m=s-i,v=h-a;return 0<=u*v-p*m+m*a-i*v?1:-1},O}();i.Triangulator=a}(spine||(spine={})),function(i){var a=function(){function t(){this.array=new Array}return t.prototype.add=function(i){var a=this.contains(i);return this.array[0|i]=0|i,!a},t.prototype.contains=function(i){return null!=this.array[0|i]},t.prototype.remove=function(i){this.array[0|i]=void 0},t.prototype.clear=function(){this.array.length=0},t}();i.IntSet=a;var s=function(){function t(i,a,s,h){void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===h&&(h=0),this.r=i,this.g=a,this.b=s,this.a=h}return t.prototype.set=function(i,a,s,h){return this.r=i,this.g=a,this.b=s,this.a=h,this.clamp(),this},t.prototype.setFromColor=function(i){return this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this},t.prototype.setFromString=function(i){return i="#"==i.charAt(0)?i.substr(1):i,this.r=parseInt(i.substr(0,2),16)/255,this.g=parseInt(i.substr(2,2),16)/255,this.b=parseInt(i.substr(4,2),16)/255,this.a=(8!=i.length?255:parseInt(i.substr(6,2),16))/255,this},t.prototype.add=function(i,a,s,h){return this.r+=i,this.g+=a,this.b+=s,this.a+=h,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();i.Color=s;var h=function(){function n(){}return n.clamp=function(i,a,s){return i<a?a:s<i?s:i},n.cosDeg=function(i){return Math.cos(i*n.degRad)},n.sinDeg=function(i){return Math.sin(i*n.degRad)},n.signum=function(i){return 0<i?1:i<0?-1:0},n.toInt=function(i){return 0<i?Math.floor(i):Math.ceil(i)},n.cbrt=function(i){var a=Math.pow(Math.abs(i),1/3);return i<0?-a:a},n.randomTriangular=function(i,a){return n.randomTriangularWith(i,a,.5*(i+a))},n.randomTriangularWith=function(i,a,s){var h=Math.random(),u=a-i;return h<=(s-i)/u?i+Math.sqrt(h*u*(s-i)):a-Math.sqrt((1-h)*u*(a-s))},n.PI2=2*(n.PI=3.1415927),n.radDeg=n.radiansToDegrees=180/n.PI,n.degRad=n.degreesToRadians=n.PI/180,n}();i.MathUtils=h;var u=function(){function t(){}return t.prototype.apply=function(i,a,s){return i+(a-i)*this.applyInternal(s)},t}(),p=function(i){function t(a){var s=i.call(this)||this;return s.power=2,s.power=a,s}return __extends(t,i),t.prototype.applyInternal=function(i){return i<=.5?Math.pow(2*i,this.power)/2:Math.pow(2*(i-1),this.power)/(this.power%2==0?-2:2)+1},t}(i.Interpolation=u),m=function(i){function t(a){return i.call(this,a)||this}return __extends(t,i),t.prototype.applyInternal=function(i){return Math.pow(i-1,this.power)*(this.power%2==0?-1:1)+1},t}(i.Pow=p);i.PowOut=m;var v=function(){function r(){}return r.arrayCopy=function(i,a,s,h,u){for(var p=a,m=h;p<a+u;p++,m++)s[m]=i[p]},r.setArraySize=function(i,a,s){void 0===s&&(s=0);var h=i.length;if(h==a)return i;if(h<(i.length=a))for(var u=h;u<a;u++)i[u]=s;return i},r.ensureArrayCapacity=function(i,a,s){return void 0===s&&(s=0),i.length>=a?i:r.setArraySize(i,a,s)},r.newArray=function(i,a){for(var s=new Array(i),h=0;h<i;h++)s[h]=a;return s},r.newFloatArray=function(i){if(r.SUPPORTS_TYPED_ARRAYS)return new Float32Array(i);for(var a=new Array(i),s=0;s<a.length;s++)a[s]=0;return a},r.newShortArray=function(i){if(r.SUPPORTS_TYPED_ARRAYS)return new Int16Array(i);for(var a=new Array(i),s=0;s<a.length;s++)a[s]=0;return a},r.toFloatArray=function(i){return r.SUPPORTS_TYPED_ARRAYS?new Float32Array(i):i},r.toSinglePrecision=function(i){return r.SUPPORTS_TYPED_ARRAYS?Math.fround(i):i},r.webkit602BugfixHelper=function(i,a){},r.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,r}();i.Utils=v;var E=function(){function t(){}return t.logBones=function(i){for(var a=0;a<i.bones.length;a++){var s=i.bones[a];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}},t}();i.DebugUtils=E;var M=function(){function t(i){this.items=new Array,this.instantiator=i}return t.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},t.prototype.free=function(i){i.reset&&i.reset(),this.items.push(i)},t.prototype.freeAll=function(i){for(var a=0;a<i.length;a++)i[a].reset&&i[a].reset(),this.items[a]=i[a]},t.prototype.clear=function(){this.items.length=0},t}();i.Pool=M;var b=function(){function t(i,a){void 0===i&&(i=0),void 0===a&&(a=0),this.x=i,this.y=a}return t.prototype.set=function(i,a){return this.x=i,this.y=a,this},t.prototype.length=function(){var i=this.x,a=this.y;return Math.sqrt(i*i+a*a)},t.prototype.normalize=function(){var i=this.length();return 0!=i&&(this.x/=i,this.y/=i),this},t}();i.Vector2=b;var R=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var i=Date.now()/1e3;this.delta=i-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=i,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();i.TimeKeeper=R;var I=function(){function t(i){void 0===i&&(i=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(i)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(i){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=i,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var i=0,a=0;a<this.values.length;a++)i+=this.values[a];this.mean=i/this.values.length,this.dirty=!1}return this.mean}return 0},t}();i.WindowedMean=I}(spine||(spine={})),function(){var i;Math.fround||(Math.fround=(i=new Float32Array(1),function(a){return i[0]=a,i[0]}))}(),function(i){var a=function(i){function r(a){var s=i.call(this,a)||this;return s.id=(65535&r.nextID++)<<11,s.worldVerticesLength=0,s}return __extends(r,i),r.prototype.computeWorldVertices=function(i,a,s,h,u,p){s=u+(s>>1)*p;var m=i.bone.skeleton,v=i.attachmentVertices,E=this.vertices,M=this.bones;if(null!=M){for(var b=0,R=0,I=0;I<a;I+=2)b+=(_=M[b])+1,R+=_;var S=m.bones;if(0==v.length)for(j=u,F=3*R;j<s;j+=p){var P=0,C=0,_=M[b++];for(_+=b;b<_;b++,F+=3){L=S[M[b]],G=E[F],z=E[F+1];var V=E[F+2];P+=(G*L.a+z*L.b+L.worldX)*V,C+=(G*L.c+z*L.d+L.worldY)*V}h[j]=P,h[j+1]=C}else for(var N=v,D=(j=u,F=3*R,R<<1);j<s;j+=p){for(P=0,C=0,_=M[b++],_+=b;b<_;b++,F+=3,D+=2)L=S[M[b]],G=E[F]+N[D],z=E[F+1]+N[D+1],V=E[F+2],P+=(G*L.a+z*L.b+L.worldX)*V,C+=(G*L.c+z*L.d+L.worldY)*V;h[j]=P,h[j+1]=C}}else{0<v.length&&(E=v);for(var L,Y=(L=i.bone).worldX,U=L.worldY,X=L.a,F=L.b,B=L.c,W=L.d,q=a,j=u;j<s;q+=2,j+=p){var G=E[q],z=E[q+1];h[j]=G*X+z*F+Y,h[j+1]=G*B+z*W+U}}},r.prototype.applyDeform=function(i){return this==i},r.nextID=0,r}(i.Attachment=function(i){if(null==i)throw new Error("name cannot be null.");this.name=i});i.VertexAttachment=a}(spine||(spine={})),function(i){var a;(a=i.AttachmentType||(i.AttachmentType={}))[a.Region=0]="Region",a[a.BoundingBox=1]="BoundingBox",a[a.Mesh=2]="Mesh",a[a.LinkedMesh=3]="LinkedMesh",a[a.Path=4]="Path",a[a.Point=5]="Point"}(spine||(spine={})),function(i){var a=function(a){function t(s){var h=a.call(this,s)||this;return h.color=new i.Color(1,1,1,1),h}return __extends(t,a),t}(i.VertexAttachment);i.BoundingBoxAttachment=a}(spine||(spine={})),function(i){var a=function(a){function t(s){var h=a.call(this,s)||this;return h.color=new i.Color(.2275,.2275,.8078,1),h}return __extends(t,a),t}(i.VertexAttachment);i.ClippingAttachment=a}(spine||(spine={})),function(i){var a=function(a){function t(s){var h=a.call(this,s)||this;return h.color=new i.Color(1,1,1,1),h.inheritDeform=!1,h.tempColor=new i.Color(0,0,0,0),h}return __extends(t,a),t.prototype.updateUVs=function(){var a=0,s=0,h=0,u=0;null==this.region?(a=s=0,h=u=1):(a=this.region.u,s=this.region.v,h=this.region.u2-a,u=this.region.v2-s);var p=this.regionUVs;null!=this.uvs&&this.uvs.length==p.length||(this.uvs=i.Utils.newFloatArray(p.length));var m=this.uvs;if(this.region.rotate)for(var v=0,E=m.length;v<E;v+=2)m[v]=a+p[v+1]*h,m[v+1]=s+u-p[v]*u;else for(v=0,E=m.length;v<E;v+=2)m[v]=a+p[v]*h,m[v+1]=s+p[v+1]*u},t.prototype.applyDeform=function(i){return this==i||this.inheritDeform&&this.parentMesh==i},t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(i){null!=(this.parentMesh=i)&&(this.bones=i.bones,this.vertices=i.vertices,this.worldVerticesLength=i.worldVerticesLength,this.regionUVs=i.regionUVs,this.triangles=i.triangles,this.hullLength=i.hullLength,this.worldVerticesLength=i.worldVerticesLength)},t}(i.VertexAttachment);i.MeshAttachment=a}(spine||(spine={})),function(i){var a=function(a){function t(s){var h=a.call(this,s)||this;return h.closed=!1,h.constantSpeed=!1,h.color=new i.Color(1,1,1,1),h}return __extends(t,a),t}(i.VertexAttachment);i.PathAttachment=a}(spine||(spine={})),function(i){var a=function(a){function t(s){var h=a.call(this,s)||this;return h.color=new i.Color(.38,.94,0,1),h}return __extends(t,a),t.prototype.computeWorldPosition=function(i,a){return a.x=this.x*i.a+this.y*i.b+i.worldX,a.y=this.x*i.c+this.y*i.d+i.worldY,a},t.prototype.computeWorldRotation=function(a){var s=i.MathUtils.cosDeg(this.rotation),h=i.MathUtils.sinDeg(this.rotation),u=s*a.a+h*a.b,p=s*a.c+h*a.d;return Math.atan2(p,u)*i.MathUtils.radDeg},t}(i.VertexAttachment);i.PointAttachment=a}(spine||(spine={})),function(i){var a=function(a){function y(s){var h=a.call(this,s)||this;return h.x=0,h.y=0,h.scaleX=1,h.scaleY=1,h.rotation=0,h.width=0,h.height=0,h.color=new i.Color(1,1,1,1),h.offset=i.Utils.newFloatArray(8),h.uvs=i.Utils.newFloatArray(8),h.tempColor=new i.Color(1,1,1,1),h}return __extends(y,a),y.prototype.updateOffset=function(){var i=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*i,h=-this.height/2*this.scaleY+this.region.offsetY*a,u=s+this.region.width*i,p=h+this.region.height*a,m=this.rotation*Math.PI/180,v=Math.cos(m),E=Math.sin(m),M=s*v+this.x,b=s*E,R=h*v+this.y,I=h*E,S=u*v+this.x,P=u*E,C=p*v+this.y,_=p*E,V=this.offset;V[y.OX1]=M-I,V[y.OY1]=R+b,V[y.OX2]=M-_,V[y.OY2]=C+b,V[y.OX3]=S-_,V[y.OY3]=C+P,V[y.OX4]=S-I,V[y.OY4]=R+P},y.prototype.setRegion=function(i){this.region=i;var a=this.uvs;i.rotate?(a[2]=i.u,a[3]=i.v2,a[4]=i.u,a[5]=i.v,a[6]=i.u2,a[7]=i.v,a[0]=i.u2,a[1]=i.v2):(a[0]=i.u,a[1]=i.v2,a[2]=i.u,a[3]=i.v,a[4]=i.u2,a[5]=i.v,a[6]=i.u2,a[7]=i.v2)},y.prototype.computeWorldVertices=function(i,a,s,h){var u=this.offset,p=i.worldX,m=i.worldY,v=i.a,E=i.b,M=i.c,b=i.d,R=0,I=0;R=u[y.OX1],I=u[y.OY1],a[s]=R*v+I*E+p,a[s+1]=R*M+I*b+m,s+=h,R=u[y.OX2],I=u[y.OY2],a[s]=R*v+I*E+p,a[s+1]=R*M+I*b+m,s+=h,R=u[y.OX3],I=u[y.OY3],a[s]=R*v+I*E+p,a[s+1]=R*M+I*b+m,s+=h,R=u[y.OX4],I=u[y.OY4],a[s]=R*v+I*E+p,a[s+1]=R*M+I*b+m},y.OX1=0,y.OY1=1,y.OX2=2,y.OY2=3,y.OX3=4,y.OY3=5,y.OX4=6,y.OY4=7,y.X1=0,y.Y1=1,y.C1R=2,y.C1G=3,y.C1B=4,y.C1A=5,y.U1=6,y.V1=7,y.X2=8,y.Y2=9,y.C2R=10,y.C2G=11,y.C2B=12,y.C2A=13,y.U2=14,y.V2=15,y.X3=16,y.Y3=17,y.C3R=18,y.C3G=19,y.C3B=20,y.C3A=21,y.U3=22,y.V3=23,y.X4=24,y.Y4=25,y.C4R=26,y.C4G=27,y.C4B=28,y.C4A=29,y.U4=30,y.V4=31,y}(i.Attachment);i.RegionAttachment=a}(spine||(spine={})),function(i){var a=function(){function t(i,a){this.jitterX=0,this.jitterY=0,this.jitterX=i,this.jitterY=a}return t.prototype.begin=function(i){},t.prototype.transform=function(a,s,h,u){a.x+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY),a.y+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}();i.JitterEffect=a}(spine||(spine={})),function(i){var a=function(){function c(i){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=i}return c.prototype.begin=function(i){this.worldX=i.x+this.centerX,this.worldY=i.y+this.centerY},c.prototype.transform=function(a,s,h,u){var p=this.angle*i.MathUtils.degreesToRadians,m=a.x-this.worldX,v=a.y-this.worldY,E=Math.sqrt(m*m+v*v);if(E<this.radius){var M=c.interpolation.apply(0,p,(this.radius-E)/this.radius),b=Math.cos(M),R=Math.sin(M);a.x=b*m-R*v+this.worldX,a.y=R*m+b*v+this.worldY}},c.prototype.end=function(){},c.interpolation=new i.PowOut(2),c}();i.SwirlEffect=a}(spine||(spine={})),pc.extend(pc,function(){var i={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},a={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT},o=function(i){this._image={width:i.width,height:i.height},this.pcTexture=i};o.prototype={setFilters:function(a,s){this.pcTexture.minFilter=i[a],this.pcTexture.magFilter=i[s]},setWraps:function(i,s){this.pcTexture.addressU=a[i],this.pcTexture.addressV=a[s]},getImage:function(){return this._image}};var t=function(i,a,s,h){this._app=i,this._position=new pc.Vec3;var u=new spine.TextureAtlas(a,(function(i){return new o(h[i])})),p=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(u));p.scale*=.01;var m=p.readSkeletonData(s);this.skeleton=new spine.Skeleton(m),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.skeleton.data),this.states=[new spine.AnimationState(this.stateData)],this._node=new pc.GraphNode,this._meshInstances=[],this._materials={},this._priority=0,this._layers=[pc.LAYERID_UI],this.update(0),this.autoUpdate=!0,this._model=new pc.Model,this._model.graph=this._node,this._model.meshInstances=this._meshInstances,this._modelChanged=!0,this._reordered=!0,this._hidden=!1};return t.prototype={destroy:function(){this._model&&this.removeFromLayers(),this._model=null,this._meshInstances=[],this.skeleton=null,this.stateData=null,this.state=null,this._materials={},this._node=null},hide:function(){if(!this._hidden){for(var i=this.skeleton.drawOrder,a=0,s=i.length;a<s;a++){var h=i[a];h.current&&h.current.meshInstance&&(h.current.meshInstance.visible=!1)}this._hidden=!0}},show:function(){if(this._hidden){for(var i=this.skeleton.drawOrder,a=0,s=i.length;a<s;a++){var h=i[a];h.current&&h.current.meshInstance&&(h.current.meshInstance.visible=!0)}this._hidden=!1}},updateSlot:function(i,a){var s=a.attachment;if(a.current&&a.current.meshInstance&&(a.current.meshInstance.visible=!1),s){var h=s.name;if(void 0===a.positions&&(a.vertices=[],a.positions=[],a.colorUniforms={}),void 0===a.meshes&&(a.current={mesh:null,meshInstance:null},a.meshes={},a.meshInstances={},a.materials={}),s instanceof spine.RegionAttachment){if(s.computeWorldVertices(a.bone,a.vertices,0,2),a.positions=[a.vertices[0],a.vertices[1],0,a.vertices[2],a.vertices[3],0,a.vertices[4],a.vertices[5],0,a.vertices[6],a.vertices[7],0],void 0===a.meshes[h]){var u={normals:[0,1,0,0,1,0,0,1,0,0,1,0],uvs:[s.uvs[0],1-s.uvs[1],s.uvs[2],1-s.uvs[3],s.uvs[4],1-s.uvs[5],s.uvs[6],1-s.uvs[7]],indices:[0,3,2,2,1,0]};a.meshes[h]=pc.createMesh(this._app.graphicsDevice,a.positions,u),a.meshes[h].name=h}}else if(s instanceof spine.MeshAttachment){s.computeWorldVertices(a,0,s.worldVerticesLength,a.vertices,0,2);var p,m,v=0,E=[];for(p=0,m=s.worldVerticesLength;p<m;p+=2)a.positions[v]=a.vertices[p],a.positions[v+1]=a.vertices[p+1],a.positions[v+2]=0,E[v]=0,E[v+1]=1,E[v+2]=0,v+=3;if(void 0===a.meshes[h]){var M=new Float32Array(s.uvs.length);for(p=0,m=M.length;p<m;p++)M[p]=p%2?1-s.uvs[p]:s.uvs[p];u={normals:E,uvs:M,indices:s.triangles},a.meshes[h]=pc.createMesh(this._app.graphicsDevice,a.positions,u),a.meshes[h].name=h}}if(void 0===a.materials[h]){var b=s.region.texture.pcTexture;if(b)if(b instanceof pc.StandardMaterial)a.materials[h]=b,this._materials[b.name]=b;else{var R=null;if(b.getSource()instanceof Image&&(R=b.getSource().getAttribute("src")),R&&void 0!==this._materials[R])a.materials[h]=this._materials[R];else{a.materials[h]=new pc.StandardMaterial,a.materials[h].shadingModel=pc.SPECULAR_BLINN,a.materials[h].diffuse=new pc.Color(0,0,0),a.materials[h].emissiveMap=b,a.materials[h].emissiveTint=!0,a.materials[h].emissive=new pc.Color(0,0,0),a.materials[h].opacityTint=!0,a.materials[h].opacity=0,a.materials[h].opacityMap=b,a.materials[h].opacityMapChannel="a",a.materials[h].depthWrite=!1,a.materials[h].cull=pc.CULLFACE_NONE,a.materials[h].blendType=pc.BLEND_PREMULTIPLIED,a.materials[h].update();var I=["gl_FragColor.rgb *= material_opacity;","gl_FragColor.a = dAlpha;"].join("\n");a.materials[h].chunks.outputAlphaPremulPS=I,R&&(this._materials[R]=a.materials[h])}}}void 0===a.meshInstances[h]&&(a.meshInstances[h]=new pc.MeshInstance(this._node,a.meshes[h],a.materials[h]),this._meshInstances.push(a.meshInstances[h]),this._modelChanged=!0,this._reordered=!0),a.colorUniforms[h]||(a.colorUniforms[h]=new Float32Array(3)),a.colorUniforms[h][0]=a.color.r,a.colorUniforms[h][1]=a.color.g,a.colorUniforms[h][2]=a.color.b,a.meshes[h].updateVertices(a.positions),a.meshInstances[h].setParameter("material_opacity",a.color.a),a.meshInstances[h].setParameter("material_emissive",a.colorUniforms[h]),this._reordered=!0,a.current.mesh=a.meshes[h],a.current.meshInstance=a.meshInstances[h],a.current.meshInstance.visible=!0}},reorder:function(){for(var i=this.skeleton.drawOrder,a=0,s=i.length;a<s;a++){var h=i[a];if(h.attachment){var u=h.attachment.name,p=h.meshInstances[u];p&&(p.drawOrder=a+1e3*this.priority)}}},update:function(i){if(!this._hidden){for(var a=0,s=this.states.length;a<s;a++)this.states[a].update(i);for(a=0,s=this.states.length;a<s;a++)this.states[a].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform();var h=this.skeleton.drawOrder;for(a=0,s=h.length;a<s;a++){var u=h[a];this.updateSlot(a,u)}this._modelChanged&&this._model&&(this.removeFromLayers(),this.addToLayers(),this._modelChanged=!1),this._reordered&&this.reorder(),this._reordered=!1}},setPosition:function(i){this._position.copy(i)},removeFromLayers:function(){if(this._model)for(var i=0;i<this._layers.length;i++){var a=this._layers[i],s=this._app.scene.layers.getLayerById(a);s&&s.removeMeshInstances(this._model.meshInstances)}},addToLayers:function(){if(this._model)for(var i=0;i<this._layers.length;i++){var a=this._layers[i],s=this._app.scene.layers.getLayerById(a);s&&s.addMeshInstances(this._model.meshInstances)}}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},set:function(i){this._priority=i,this._reordered=!0}}),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},set:function(i){this._model&&this.removeFromLayers(),this._layers=i||[],this._model&&this.addToLayers()}}),{Spine:t}}()),pc.extend(pc,function(){var r=function(i){this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],this.on("remove",this.onRemove,this),pc.ComponentSystem.bind("update",this.onUpdate,this)};return r=pc.inherits(r,pc.ComponentSystem),pc.extend(r.prototype,{initializeComponentData:function(i,a,s){s=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],r._super.initializeComponentData.call(this,i,a,s)},removeComponent:function(i){var a=i.spine.data;a.spine&&a.spine.destroy()},onUpdate:function(i){var a=this.store;for(var s in a)if(a.hasOwnProperty(s)){var h=a[s],u=h.data;u.enabled&&h.entity.enabled&&u.spine&&(u.spine.setPosition(h.entity.getPosition()),u.spine.update(u.speed*i))}},onRemove:function(i,a){}}),{SpineComponentSystem:r}}()),pc.extend(pc,function(){var e=function(i,a){this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)};return e=pc.inherits(e,pc.Component),pc.extend(e.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var i={},a=0,s=this.textureAssets.length;a<s;a++){var h=this.system.app.assets.get(this.textureAssets[a]),u=pc.path.getBasename(h.file.url),p=u.indexOf("?");-1!==p&&(u=u.substring(0,p)),i[u]=h.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,i),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(i){"texture"===i.type&&this.textures.push(i.resource),"json"===i.type&&(this.skeletonData=i.resource),"text"===i.type&&(this.atlasData=i.resource)},_onAssetAdd:function(i){i.off("change",this.onAssetChanged,this),i.on("change",this.onAssetChanged,this),i.off("remove",this.onAssetRemoved,this),i.on("remove",this.onAssetRemoved,this),i.ready(this._onAssetReady,this),this.system.app.assets.load(i)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(i,a,s){var h=this.system.app.assets,u=null;if(a&&(u=h.get(a))&&(u.off("change",this.onAssetChanged),u.off("remove",this.onAssetRemoved)),s){var p=s;s instanceof pc.Asset&&(p=s.id,this.data[i]=p),(u=h.get(p))?this._onAssetAdd(u):h.on("add:"+p)}},onSetAssets:function(i,a,s){var h,u,p=this.system.app.assets,m=null;if(a.length)for(h=0,u=a.length;h<u;h++)(m=p.get(a[h]))&&(m.off("change",this.onAssetChanged),m.off("remove",this.onAssetRemoved));if(s&&s.length){var v=s.map((function(i){return i instanceof pc.Asset?i.id:i}));for(h=0,u=s.length;h<u;h++)(m=p.get(v[h]))?this._onAssetAdd(m):p.on("add:"+v[h])}},onAssetChanged:function(i,a,s,h){},onAssetRemoved:function(i){},onEnable:function(){e._super.onEnable.call(this);var i=this.data.spine;i&&i.addToLayers()},onDisable:function(){e._super.onDisable.call(this);var i=this.data.spine;i&&i.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()}}),{SpineComponent:e}}()),pc.extend(pc,function(){var t=function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null};return{SpineComponentData:t=pc.inherits(t,pc.ComponentData)}}()),function(){if(pc.Mesh.prototype.updateVertices=function(i,a,s,h){for(var u=i.length/3,p=new pc.VertexIterator(this.vertexBuffer),m=0;m<u;m++)p.element[pc.SEMANTIC_POSITION].set(i[3*m],i[3*m+1],i[3*m+2]),a&&p.element[pc.SEMANTIC_NORMAL].set(a[3*m],a[3*m+1],a[3*m+2]),s&&p.element[pc.SEMANTIC_TANGENT].set(s[4*m],s[4*m+1],s[4*m+2],s[4*m+3]),h&&p.element[pc.SEMANTIC_TEXCOORD0].set(h[2*m],h[2*m+1]),p.next();p.end()},pc.Application.registerPlugin)pc.Application.registerPlugin("spine",(function(i){new pc.SpineComponentSystem(i)}));else{var i=pc.Application.getApplication(),a=new pc.SpineComponentSystem(i);i.systems.add(a)}}();var Follow=pc.createScript("follow");Follow.attributes.add("target",{type:"entity",title:"Target",description:"The Entity to follow"}),Follow.attributes.add("distance",{type:"number",default:4,title:"Distance",description:"How far from the Entity should the follower be"}),Follow.prototype.initialize=function(){this.vec=new pc.Vec3},Follow.prototype.update=function(t){if(this.target){var e=this.target.getPosition();e.x+=.75*this.distance,e.y+=1*this.distance,e.z+=.75*this.distance,this.vec.lerp(this.vec,e,.1),this.entity.setPosition(this.vec)}};var Movement=pc.createScript("movement");Movement.attributes.add("speed",{type:"number",default:.1,min:.05,max:.5,precision:2,description:"Controls the movement speed"}),Movement.prototype.initialize=function(){this.force=new pc.Vec3,this.entity.rigidbody.angularFactor=new pc.Vec3(0,0,0)},Movement.prototype.update=function(e){var t=0,s=0;if(this.app.keyboard.isPressed(pc.KEY_LEFT)&&(t=-this.speed,this.entity.setLocalRotation(0,Math.PI/2,0)),this.app.keyboard.isPressed(pc.KEY_RIGHT)&&(t+=this.speed),this.app.keyboard.isPressed(pc.KEY_UP)&&(s=-this.speed),this.app.keyboard.isPressed(pc.KEY_DOWN)&&(s+=this.speed),this.force.x=t,this.force.z=s,this.force.length()){var i=Math.cos(.25*-Math.PI),o=Math.sin(.25*-Math.PI);this.force.set(this.force.x*i-this.force.z*o,0,this.force.z*i+this.force.x*o),this.force.length()>this.speed&&this.force.normalize().scale(this.speed)}this.entity.rigidbody.applyImpulse(this.force)};var Teleportable=pc.createScript("teleportable");Teleportable.prototype.initialize=function(){this.lastTeleportFrom=null,this.lastTeleportTo=null,this.lastTeleport=Date.now(),this.startPosition=this.entity.getPosition().clone()},Teleportable.prototype.update=function(t){this.entity.getPosition().y<0&&this.teleport(this.lastTeleportFrom,this.lastTeleportTo)},Teleportable.prototype.teleport=function(t,e){var o;t&&Date.now()-this.lastTeleport<500||(this.lastTeleport=Date.now(),this.lastTeleportFrom=t,this.lastTeleportTo=e,e?(o=e.getPosition()).y+=.5:o=this.startPosition,this.entity.rigidbody.teleport(o),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO)};var Teleport=pc.createScript("teleport");Teleport.attributes.add("target",{type:"entity",title:"Target Entity",description:"The target entity where we are going to teleport"}),Teleport.prototype.initialize=function(){this.target&&this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},Teleport.prototype.onTriggerEnter=function(t){t.script.teleportable&&t.script.teleportable.teleport(this.entity,this.target)};var Ui=pc.createScript("ui");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),Ui.attributes.add("play_sceneId",{type:"string",default:"0",title:"Play Scene ID to Load"}),Ui.prototype.initialize=function(){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",document.body.appendChild(this.div),this.counter=0,this.bindEvents()},Ui.prototype.bindEvents=function(){var e=this,t=this.div.querySelector("#play"),i=this.div.querySelector("#option"),n=this.div.querySelector("#credit");t&&t.addEventListener("click",(function(){e.div.style.display="none",console.log("btnPlay");var t=e.app.root.findByName("Root");e.loadScene(e.play_sceneId,(function(){t.destroy()}))}),!1),i&&i.addEventListener("click",(function(){console.log("btnOption");var t=e.div.querySelector("#option_p");"none"==t.style.display?t.style.display="inline":t.style.display="none"}),!1),n&&n.addEventListener("click",(function(){var t=e.div.querySelector("#credit_p");"none"==t.style.display?t.style.display="inline":t.style.display="none"}),!1)},Ui.prototype.loadScene=function(e,t){var i=e+".json";this.app.loadSceneHierarchy(i,(function(e,i){e?console.error(e):t(i)}))};var Rot=pc.createScript("Rot");Rot.prototype.update=function(t){this.entity.rotate(0,0,10*t)};var Updown=pc.createScript("updown");Updown.prototype.initialize=function(){this.startPosition=this.entity.getPosition().clone(),this.aa=1,this.bb=3},Updown.prototype.update=function(t){var i=Math.sin(Date.now()/1e3*this.bb)*this.aa;this.entity.rigidbody.teleport(this.startPosition.x,this.startPosition.y+i,this.startPosition.z)},Updown.prototype.swap=function(t){this.aa=4,this.bb=2.4,this.startPosition=t.startPosition.clone()};var Spine=pc.createScript("spine");Spine.attributes.add("atlas",{type:"asset",assetType:"text"}),Spine.attributes.add("skeleton",{type:"asset",assetType:"json"}),Spine.attributes.add("textures",{type:"asset",array:!0,assetType:"texture"}),Spine.attributes.add("priority",{type:"number",default:1}),Spine.prototype.initialize=function(){if(this.atlas&&this.textures&&this.skeleton){this.entity.addComponent("spine",{atlasAsset:this.atlas.id,textureAssets:this.textures.map((function(t){return t.id})),skeletonAsset:this.skeleton.id}),this.entity.spine&&(this.priority=this.priority?this.priority:0,this.entity.spine.spine.priority=this.priority);var t=this.entity.spine;t.spine.skeleton.setSlotsToSetupPose(),t.spine.state.setAnimation(0,"animation",!0),t.spine.speed=.4}this.on("attr:priority",(function(t){this.entity.spine&&(this.entity.spine.spine.priority=t)}),this)};