var FirstPersonMovement=pc.createScript("player");FirstPersonMovement.prototype.initialize=function(){this.force=new pc.Vec3;this.app},FirstPersonMovement.prototype.update=function(e){var i=this.force,r=this.app,t=this.entity.forward,s=0,o=0;r.keyboard.isPressed(pc.KEY_W)&&(s+=t.x,o+=t.z),r.keyboard.isPressed(pc.KEY_S)&&(s-=t.x,o-=t.z),(r.keyboard.isPressed(pc.KEY_A)||r.keyboard.isPressed(pc.KEY_Q))&&this.entity.rigidbody.applyTorque(0,1,0),r.keyboard.isPressed(pc.KEY_D)&&this.entity.rigidbody.applyTorque(0,-1,0),0!==s&&0!==o&&(i.set(s,0,o).normalize().scale(18),this.entity.rigidbody.applyForce(i))};var FirstPersonMovement=pc.createScript("enemies");FirstPersonMovement.prototype.initialize=function(){this.force=new pc.Vec3},FirstPersonMovement.prototype.update=function(e){var t=this.force,i=this.entity.forward,r=0,o=0;r+=i.x,o+=i.z,0!==r&&0!==o&&(t.set(r,0,o).normalize().scale(7.5),this.entity.rigidbody.applyForce(t))};var Collider=pc.createScript("patrol"),timer=0;Collider.prototype.initialize=function(){this.entity.collision.on("collisionstart",this.onCollisionStart,this)},Collider.prototype.update=function(t){"playerX"===this.entity.name&&(timer+=t)>50&&(this.entity.name="player",timer=0),console.log(timer)},Collider.prototype.onCollisionStart=function(t){t.other.rigidbody&&this.entity.rigidbody.applyTorque(0,50,0),"player"===t.other.name&&this.entity.rigidbody.applyImpulse(3,0,3),"myplayer"===t.other.name&&(this.entity.rigidbody.applyImpulse(3,0,3),this.entity.name="playerX")};var Ui=pc.createScript("ui");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),Ui.prototype.initialize=function(){var t=document.createElement("style");document.head.appendChild(t),t.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",document.body.appendChild(this.div),this.counter=0,this.result="waiting...",this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.bindEvents()},Ui.prototype.onTriggerEnter=function(t){"myplayer"===t.name&&(this.result="YOU LOSE",this.app.timeScale=0),"playerX"===t.name&&(this.counter+=1),3===this.counter&&(this.result="YOU WIN",this.app.timeScale=0),this.bindEvents()},Ui.prototype.bindEvents=function(){var t=this.div.querySelector(".counter"),e=this.div.querySelector(".result");t&&(t.textContent=this.counter),e&&(e.textContent=this.result)};var Boxpatch=pc.createScript("boxpatch");Boxpatch.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},Boxpatch.prototype.onTriggerEnter=function(t){"player"===t.name&&t.rigidbody.teleport(0,1,0)};